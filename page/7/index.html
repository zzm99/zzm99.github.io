<!DOCTYPE html>



  


<html class="theme-next gemini use-motion" lang>
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/touxiang.ico?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT">










<meta property="og:type" content="website">
<meta property="og:title" content="zzm99">
<meta property="og:url" content="http://yoursite.com/page/7/index.html">
<meta property="og:site_name" content="zzm99">
<meta property="og:locale" content="default">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="zzm99">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":true,"scrollpercent":true,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/page/7/">






  <script>
  (function(i,s,o,g,r,a,m){i["DaoVoiceObject"]=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;a.charset="utf-8";m.parentNode.insertBefore(a,m)})(window,document,"script",('https:' == document.location.protocol ? 'https:' : 'http:') + "//widget.daovoice.io/widget/0f81ff2f.js","daovoice")
  daovoice('init', {
      app_id: "29501955"
    });
  daovoice('update');
  </script>

  <title>zzm99</title>
  








</head>


<body itemscope itemtype="http://schema.org/WebPage" lang="default">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>
    
    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">zzm99</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br>
            
            Tags
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br>
            
            Categories
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            Archives
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br>
            
            Search
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off" placeholder="Searching..." spellcheck="false" type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/10/06/leetcodeweek10/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="zzm99">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="zzm99">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/10/06/leetcodeweek10/" itemprop="url">Biweekly Contest 10</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-10-06T23:52:19+08:00">
                2019-10-06
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/leetcode/" itemprop="url" rel="index">
                    <span itemprop="name">leetcode</span>
                  </a>
                </span>

                
                
                  , 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/leetcode/Weekly-Contest/" itemprop="url" rel="index">
                    <span itemprop="name">Weekly-Contest</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2019/10/06/leetcodeweek10/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count valine-comment-count" data-xid="/2019/10/06/leetcodeweek10/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Words count in article&#58;</span>
                
                <span title="Words count in article">
                  593
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Reading time &asymp;</span>
                
                <span title="Reading time">
                  3
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="1213-Intersection-of-Three-Sorted-Arrays"><a href="#1213-Intersection-of-Three-Sorted-Arrays" class="headerlink" title="1213. Intersection of Three Sorted Arrays"></a>1213. Intersection of Three Sorted Arrays</h1><p>Given three integer arrays arr1, arr2 and arr3 sorted in strictly increasing order, return a sorted array of only the integers that appeared in all three arrays.</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; arraysIntersection(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; arr1, <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; arr2, <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; arr3) &#123;</span><br><span class="line">        <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; ret;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;arr1.size(); i++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">int</span> cur = arr1[i];</span><br><span class="line">            <span class="keyword">if</span>(find(arr2.begin(), arr2.end(), cur) != arr2.end() &amp;&amp; find(arr3.begin(), arr3.end(), cur) != arr3.end())</span><br><span class="line">                ret.push_back(arr1[i]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ret;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h1 id="1214-Two-Sum-BSTs"><a href="#1214-Two-Sum-BSTs" class="headerlink" title="1214. Two Sum BSTs"></a>1214. Two Sum BSTs</h1><p>Given two binary search trees, return True if and only if there is a node in the first tree and a node in the second tree whose values sum up to a given integer target.</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Definition for a binary tree node.</span></span><br><span class="line"><span class="comment"> * struct TreeNode &#123;</span></span><br><span class="line"><span class="comment"> *     int val;</span></span><br><span class="line"><span class="comment"> *     TreeNode *left;</span></span><br><span class="line"><span class="comment"> *     TreeNode *right;</span></span><br><span class="line"><span class="comment"> *     TreeNode(int x) : val(x), left(NULL), right(NULL) &#123;&#125;</span></span><br><span class="line"><span class="comment"> * &#125;;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">set</span>&lt;<span class="keyword">int</span>&gt; s;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(TreeNode* root)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(!root) <span class="keyword">return</span>;</span><br><span class="line">        dfs(root-&gt;left);</span><br><span class="line">        dfs(root-&gt;right);</span><br><span class="line">        s.insert(root-&gt;val);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">bool</span> <span class="title">helper</span><span class="params">(TreeNode* root, <span class="keyword">int</span> target)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(!root) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        <span class="keyword">if</span>(find(s.begin(), s.end(), target-root-&gt;val) != s.end())</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        <span class="keyword">return</span> helper(root-&gt;left, target) || helper(root-&gt;right, target);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">bool</span> <span class="title">twoSumBSTs</span><span class="params">(TreeNode* root1, TreeNode* root2, <span class="keyword">int</span> target)</span> </span>&#123;</span><br><span class="line">        s.clear();</span><br><span class="line">        dfs(root1);</span><br><span class="line">        <span class="keyword">return</span> helper(root2, target);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h1 id="1215-Stepping-Numbers"><a href="#1215-Stepping-Numbers" class="headerlink" title="1215. Stepping Numbers"></a>1215. Stepping Numbers</h1><p>A Stepping Number is an integer such that all of its adjacent digits have an absolute difference of exactly 1. For example, 321 is a Stepping Number while 421 is not.</p>
<p>Given two integers low and high, find and return a sorted list of all the Stepping Numbers in the range [low, high] inclusive.</p>
<p>Constraints:</p>
<p>0 &lt;= low &lt;= high &lt;= 2 * 10^9</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; countSteppingNumbers(<span class="keyword">int</span> low, <span class="keyword">int</span> high) &#123;</span><br><span class="line">        <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; ans;</span><br><span class="line">        <span class="built_in">queue</span>&lt;<span class="keyword">int</span>&gt; q;</span><br><span class="line">        <span class="keyword">int</span> i, j;</span><br><span class="line">        <span class="keyword">for</span>(i=<span class="number">1</span>; i&lt;<span class="number">10</span> &amp;&amp; i&lt;=high; i++)</span><br><span class="line">            q.push(i);</span><br><span class="line">        <span class="keyword">if</span>(!low) ans.push_back(<span class="number">0</span>);</span><br><span class="line">        <span class="keyword">while</span>(!q.empty())</span><br><span class="line">        &#123;</span><br><span class="line">            i = q.front();</span><br><span class="line">            q.pop();</span><br><span class="line">            <span class="keyword">if</span>(i &gt;= low) ans.push_back(i);</span><br><span class="line">            j = i % <span class="number">10</span>;</span><br><span class="line">            <span class="keyword">if</span>(j &amp;&amp; i*<span class="number">10L</span>L+j<span class="number">-1</span> &lt;= high) q.push(i*<span class="number">10</span>+j<span class="number">-1</span>);</span><br><span class="line">            <span class="keyword">if</span>(j&lt;<span class="number">9</span> &amp;&amp; i*<span class="number">10L</span>L+j+<span class="number">1</span> &lt;= high) q.push(i*<span class="number">10</span>+j+<span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        sort(ans.begin(), ans.end());</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h1 id="1216-Valid-Palindrome-III"><a href="#1216-Valid-Palindrome-III" class="headerlink" title="1216. Valid Palindrome III"></a>1216. Valid Palindrome III</h1><p>Given a string s and an integer k, find out if the given string is a K-Palindrome or not.</p>
<p>A string is K-Palindrome if it can be transformed into a palindrome by removing at most k characters from it.</p>
<p>Constraints:</p>
<p>1 &lt;= s.length &lt;= 1000</p>
<p>s has only lowercase English letters.</p>
<p>1 &lt;= k &lt;= s.length</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">bool</span> <span class="title">isValidPalindrome</span><span class="params">(<span class="built_in">string</span> s, <span class="keyword">int</span> k)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> n = s.size();</span><br><span class="line">        <span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&gt; dp(n+<span class="number">2</span>, <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;(n+<span class="number">2</span>));</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=n; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>; j&lt;=n; j++)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">if</span>(s[i<span class="number">-1</span>] == s[n-j+<span class="number">1</span><span class="number">-1</span>])</span><br><span class="line">                    dp[i][j] = dp[i<span class="number">-1</span>][j<span class="number">-1</span>]+<span class="number">1</span>;</span><br><span class="line">                <span class="keyword">else</span></span><br><span class="line">                    dp[i][j] = max(dp[i<span class="number">-1</span>][j], dp[i][j<span class="number">-1</span>]);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span> ret = n-dp[n][n];</span><br><span class="line">        <span class="keyword">return</span> ret &lt;= k;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/10/06/leetcodeweek9/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="zzm99">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="zzm99">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/10/06/leetcodeweek9/" itemprop="url">Weekly Contest 157</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-10-06T23:51:38+08:00">
                2019-10-06
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/leetcode/" itemprop="url" rel="index">
                    <span itemprop="name">leetcode</span>
                  </a>
                </span>

                
                
                  , 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/leetcode/Weekly-Contest/" itemprop="url" rel="index">
                    <span itemprop="name">Weekly-Contest</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2019/10/06/leetcodeweek9/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count valine-comment-count" data-xid="/2019/10/06/leetcodeweek9/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Words count in article&#58;</span>
                
                <span title="Words count in article">
                  685
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Reading time &asymp;</span>
                
                <span title="Reading time">
                  4
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="1217-Play-with-Chips"><a href="#1217-Play-with-Chips" class="headerlink" title="1217. Play with Chips"></a>1217. Play with Chips</h1><p><strong>There are some chips, and the i-th chip is at position chips[i].</strong></p>
<p>You can perform any of the two following types of moves any number of times (possibly zero) on any chip:</p>
<ul>
<li>Move the i-th chip by 2 units to the left or to the right with a cost of 0.</li>
<li>Move the i-th chip by 1 unit to the left or to the right with a cost of 1.</li>
</ul>
<p>There can be two or more chips at the same position initially.</p>
<p>Return the minimum cost needed to move all the chips to the same position (any position).</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">minCostToMoveChips</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; chips)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> cnt[<span class="number">2</span>] = &#123;<span class="number">0</span>, <span class="number">0</span>&#125;;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">auto</span> p: chips)</span><br><span class="line">            cnt[p % <span class="number">2</span>]++;</span><br><span class="line">        <span class="keyword">return</span> cnt[<span class="number">0</span>] &lt; cnt[<span class="number">1</span>] ? cnt[<span class="number">0</span>] : cnt[<span class="number">1</span>];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h1 id="1218-Longest-Arithmetic-Subsequence-of-Given-Difference"><a href="#1218-Longest-Arithmetic-Subsequence-of-Given-Difference" class="headerlink" title="1218. Longest Arithmetic Subsequence of Given Difference"></a>1218. Longest Arithmetic Subsequence of Given Difference</h1><p>Given an integer array arr and an integer difference, return the length of the longest subsequence in arr which is an arithmetic sequence such that the difference between adjacent elements in the subsequence equals difference.</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">longestSubsequence</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; arr, <span class="keyword">int</span> difference)</span> </span>&#123;</span><br><span class="line">        <span class="built_in">unordered_map</span>&lt;<span class="keyword">int</span>, <span class="keyword">int</span>&gt; m;</span><br><span class="line">        <span class="keyword">int</span> ret = <span class="number">0</span>;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=arr.size()<span class="number">-1</span>; i&gt;=<span class="number">0</span>; i--)</span><br><span class="line">        &#123;</span><br><span class="line">            m[arr[i]] = <span class="number">1</span> + m[arr[i] + difference];</span><br><span class="line">            ret = max(ret, m[arr[i]]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ret;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h1 id="1219-Path-with-Maximum-Gold"><a href="#1219-Path-with-Maximum-Gold" class="headerlink" title="1219. Path with Maximum Gold"></a>1219. Path with Maximum Gold</h1><p>In a gold mine grid of size m * n, each cell in this mine has an integer representing the amount of gold in that cell, 0 if it is empty.</p>
<p>Return the maximum amount of gold you can collect under the conditions:</p>
<ul>
<li>Every time you are located in a cell you will collect all the gold in that cell.</li>
<li>From your position you can walk one step to the left, right, up or down.</li>
<li>You can’t visit the same cell more than once.</li>
<li>Never visit a cell with 0 gold.</li>
<li>You can start and stop collecting gold from any position in the grid that has some gold.</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">dfs</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&gt;&amp; g, <span class="keyword">int</span> i, <span class="keyword">int</span> j)</span> </span>&#123;</span><br><span class="line">      <span class="keyword">if</span> (i &lt; <span class="number">0</span> || j &lt; <span class="number">0</span> || i &gt;= g.size() || j &gt;= g[i].size() || g[i][j] &lt;= <span class="number">0</span>)  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">      g[i][j] = -g[i][j];</span><br><span class="line">      <span class="keyword">auto</span> res = max(&#123; dfs(g, i + <span class="number">1</span>, j), dfs(g, i, j + <span class="number">1</span>), dfs(g, i - <span class="number">1</span>, j), dfs(g, i, j - <span class="number">1</span>) &#125;);</span><br><span class="line">      g[i][j] = -g[i][j];</span><br><span class="line">      <span class="keyword">return</span> g[i][j] + res;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">getMaximumGold</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&gt;&amp; grid, <span class="keyword">int</span> res = <span class="number">0</span>)</span> </span>&#123;</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">auto</span> i = <span class="number">0</span>; i &lt; grid.size(); ++i)</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">auto</span> j = <span class="number">0</span>; j &lt; grid[i].size(); ++j)</span><br><span class="line">          res = max(res, dfs(grid, i, j));</span><br><span class="line">      <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h1 id="1220-Count-Vowels-Permutation"><a href="#1220-Count-Vowels-Permutation" class="headerlink" title="1220. Count Vowels Permutation"></a>1220. Count Vowels Permutation</h1><p>Given an integer n, your task is to count how many strings of length n can be formed under the following rules:</p>
<ul>
<li>Each character is a lower case vowel (‘a’, ‘e’, ‘i’, ‘o’, ‘u’)</li>
<li>Each vowel ‘a’ may only be followed by an ‘e’.</li>
<li>Each vowel ‘e’ may only be followed by an ‘a’ or an ‘i’.</li>
<li>Each vowel ‘i’ may not be followed by another ‘i’.</li>
<li>Each vowel ‘o’ may only be followed by an ‘i’ or a ‘u’.</li>
<li>Each vowel ‘u’ may only be followed by an ‘a’.</li>
</ul>
<p>Since the answer may be too large, return it modulo 10^9 + 7.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">countVowelPermutation</span><span class="params">(<span class="keyword">int</span> n)</span> </span>&#123;</span><br><span class="line">      <span class="keyword">int</span>[][] moves = &#123; &#123;<span class="number">1</span>&#125;, &#123;<span class="number">0</span>, <span class="number">2</span>&#125;, &#123;<span class="number">0</span>, <span class="number">1</span>, <span class="number">3</span>, <span class="number">4</span>&#125;, &#123;<span class="number">2</span>, <span class="number">4</span>&#125;, &#123; <span class="number">0</span> &#125; &#125;;</span><br><span class="line">      <span class="keyword">int</span>[] v = &#123; <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span> &#125;;</span><br><span class="line">      <span class="keyword">while</span> (--n &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">int</span>[] v1 = &#123; <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span> &#125;;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">5</span>; ++i) &#123;</span><br><span class="line">          <span class="keyword">for</span> (<span class="keyword">int</span> j : moves[i])</span><br><span class="line">            v1[j] = (v1[j] + v[i]) % <span class="number">1000000007</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        v = v1;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">return</span> (<span class="keyword">int</span>)(((<span class="keyword">long</span>)v[<span class="number">0</span>] + v[<span class="number">1</span>] + v[<span class="number">2</span>] + v[<span class="number">3</span>] + v[<span class="number">4</span>]) % <span class="number">1000000007</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/09/29/web6/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="zzm99">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="zzm99">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/09/29/web6/" itemprop="url">移动网络安全与应用-实验一-SSL实验</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-09-29T23:47:03+08:00">
                2019-09-29
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/web2-0-and-移动网络安全技术/" itemprop="url" rel="index">
                    <span itemprop="name">web2.0 and 移动网络安全技术</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2019/09/29/web6/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count valine-comment-count" data-xid="/2019/09/29/web6/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Words count in article&#58;</span>
                
                <span title="Words count in article">
                  0
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Reading time &asymp;</span>
                
                <span title="Reading time">
                  1
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><img src="123-1.png" alt="1"><br><img src="123-2.png" alt="1"><br><img src="123-3.png" alt="1"><br><img src="123-4.png" alt="1"></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/09/29/web5/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="zzm99">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="zzm99">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/09/29/web5/" itemprop="url">web2.0作业三：动态按钮</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-09-29T23:46:59+08:00">
                2019-09-29
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/web2-0-and-移动网络安全技术/" itemprop="url" rel="index">
                    <span itemprop="name">web2.0 and 移动网络安全技术</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2019/09/29/web5/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count valine-comment-count" data-xid="/2019/09/29/web5/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Words count in article&#58;</span>
                
                <span title="Words count in article">
                  806
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Reading time &asymp;</span>
                
                <span title="Reading time">
                  4
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>环形按钮<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"icon"</span> <span class="attr">sizes</span>=<span class="string">"196x196"</span> <span class="attr">href</span>=<span class="string">"assets/images/favicon.png"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">type</span>=<span class="string">"text/css"</span> <span class="attr">href</span>=<span class="string">"style.css"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"at-plus-container"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"bottom-positioner"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"button"</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"info-bar"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">"display:block"</span> <span class="attr">class</span>=<span class="string">"info"</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">li</span> <span class="attr">title</span>=<span class="string">"2人参与讨论"</span> <span class="attr">class</span>=<span class="string">"page user"</span>&gt;</span><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"assets/images/people.png"</span>&gt;</span><span class="tag">&lt;<span class="name">span</span>&gt;</span>14<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">li</span> <span class="attr">title</span>=<span class="string">"3条评论"</span> <span class="attr">class</span>=<span class="string">"page comment"</span>&gt;</span><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"assets/images/comment.png"</span>&gt;</span><span class="tag">&lt;<span class="name">span</span>&gt;</span>20<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">li</span> <span class="attr">title</span>=<span class="string">"我有6条评论"</span> <span class="attr">class</span>=<span class="string">"mine posted"</span>&gt;</span><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"assets/images/post.png"</span>&gt;</span><span class="tag">&lt;<span class="name">span</span>&gt;</span>3<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">li</span> <span class="attr">title</span>=<span class="string">"被赞6次"</span> <span class="attr">class</span>=<span class="string">"mine like"</span>&gt;</span><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"assets/images/like.png"</span>&gt;</span><span class="tag">&lt;<span class="name">span</span>&gt;</span>4<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"control-ring-container"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">ul</span> <span class="attr">id</span>=<span class="string">"control-ring"</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">li</span> <span class="attr">title</span>=<span class="string">"蒙板"</span> <span class="attr">class</span>=<span class="string">"mask button"</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">li</span> <span class="attr">title</span>=<span class="string">"历史记录"</span> <span class="attr">class</span>=<span class="string">"history button"</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">li</span> <span class="attr">title</span>=<span class="string">"消息"</span> <span class="attr">class</span>=<span class="string">"message button"</span>&gt;</span><span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"unread"</span>&gt;</span>2<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">li</span> <span class="attr">title</span>=<span class="string">"设置"</span> <span class="attr">class</span>=<span class="string">"setting button"</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">li</span> <span class="attr">title</span>=<span class="string">"登录/注册"</span> <span class="attr">class</span>=<span class="string">"sign button"</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"apb"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"icon"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">html</span>, <span class="selector-tag">body</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#at-plus-container</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">200px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">0</span> auto; </span><br><span class="line">  <span class="attribute">position</span>: relative; </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#info-bar</span> &#123;</span><br><span class="line">	<span class="attribute">position</span>: absolute;</span><br><span class="line">	<span class="attribute">background-color</span>: <span class="number">#7E7E7E</span>;</span><br><span class="line">	<span class="attribute">border-radius</span>: <span class="number">50%</span>;</span><br><span class="line">	<span class="attribute">height</span>: <span class="number">26px</span>;</span><br><span class="line">	<span class="attribute">width</span>: <span class="number">26px</span>;</span><br><span class="line">	<span class="attribute">bottom</span>: <span class="number">97px</span>;</span><br><span class="line">	<span class="attribute">left</span>: <span class="number">77px</span>;</span><br><span class="line">	<span class="attribute">opacity</span>: <span class="number">0</span>;</span><br><span class="line">	<span class="attribute">transition</span>: <span class="number">0.5s</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#button</span><span class="selector-pseudo">:hover</span> <span class="selector-id">#info-bar</span> &#123;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">50%</span>;</span><br><span class="line">	<span class="attribute">background-color</span>: <span class="number">#7E7E7E</span>;</span><br><span class="line"> 	<span class="attribute">width</span>: <span class="number">130px</span>;</span><br><span class="line"> 	<span class="attribute">height</span>: <span class="number">130px</span>;</span><br><span class="line"> 	<span class="attribute">bottom</span>: <span class="number">150px</span>;</span><br><span class="line"> 	<span class="attribute">left</span>: <span class="number">25px</span>;</span><br><span class="line"> 	<span class="attribute">opacity</span>: <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#button</span> <span class="selector-tag">ul</span>&#123;</span><br><span class="line">	<span class="attribute">margin</span>: <span class="number">0</span>;</span><br><span class="line">	<span class="attribute">padding</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#button</span> <span class="selector-tag">li</span>&#123;</span><br><span class="line">	<span class="attribute">list-style</span>: none;</span><br><span class="line">	<span class="attribute">text-align</span>: center;</span><br><span class="line">	<span class="attribute">color</span>: white;</span><br><span class="line">	<span class="attribute">margin-top</span>: <span class="number">5px</span>;</span><br><span class="line">	<span class="attribute">margin-bottom</span>: <span class="number">5px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#info-bar</span> <span class="selector-tag">li</span><span class="selector-class">.comment</span> &#123;</span><br><span class="line">	<span class="attribute">font-size</span>: <span class="number">30px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#info-bar</span> <span class="selector-tag">li</span><span class="selector-class">.comment</span> <span class="selector-tag">img</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">30px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">30px</span>;</span><br><span class="line">  <span class="attribute">padding-right</span>: <span class="number">2px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#info-bar</span> <span class="selector-tag">li</span> <span class="selector-tag">span</span> &#123;</span><br><span class="line">  <span class="attribute">margin-left</span>: <span class="number">8px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#info-bar</span> <span class="selector-tag">li</span> <span class="selector-tag">img</span> &#123;</span><br><span class="line">	<span class="attribute">vertical-align</span>: middle;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#info-bar</span> <span class="selector-tag">li</span><span class="selector-class">.mine</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: inline-block;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">50%</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#26E79E</span>;</span><br><span class="line">  <span class="attribute">font-weight</span>: bold;</span><br><span class="line">  <span class="attribute">box-sizing</span>: border-box;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#info-bar</span> <span class="selector-tag">li</span><span class="selector-class">.posted</span> &#123;</span><br><span class="line">  <span class="attribute">padding-left</span>: <span class="number">15px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#info-bar</span> <span class="selector-tag">li</span><span class="selector-class">.like</span> &#123;</span><br><span class="line">  <span class="attribute">padding-right</span>: <span class="number">5px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#control-ring-container</span> &#123;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">200px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">200px</span>;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">50%</span>; </span><br><span class="line">  <span class="attribute">bottom</span>: -<span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">left</span>: <span class="number">30px</span>; </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#control-ring-container</span> <span class="selector-tag">ul</span>&#123;</span><br><span class="line">  <span class="attribute">margin-left</span>: <span class="number">45px</span>;</span><br><span class="line">  <span class="attribute">margin-top</span>: <span class="number">60px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="selector-id">#control-ring</span> <span class="selector-tag">li</span>&#123;</span><br><span class="line">  <span class="attribute">display</span>: block;</span><br><span class="line">  <span class="attribute">background</span>: <span class="number">#686868</span> center no-repeat;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">list-style</span>: none;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">30px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">30px</span>;</span><br><span class="line">  <span class="attribute">background-size</span>: <span class="number">16px</span> <span class="number">16px</span>;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">50%</span>;</span><br><span class="line">  <span class="attribute">transition</span>: <span class="number">0.5s</span>;</span><br><span class="line">  <span class="attribute">opacity</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#control-ring</span> <span class="selector-class">.unread</span>&#123;</span><br><span class="line">  <span class="attribute">display</span>: block;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">18px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">18px</span>;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">50%</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: red;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#E0D6DC</span>;</span><br><span class="line">  <span class="attribute">margin-left</span>: <span class="number">18px</span>;</span><br><span class="line">  <span class="attribute">margin-top</span>: -<span class="number">5px</span>;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">9pt</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#button</span><span class="selector-pseudo">:hover</span> <span class="selector-id">#control-ring</span> <span class="selector-tag">li</span>&#123;</span><br><span class="line">  <span class="attribute">opacity</span>: <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#button</span><span class="selector-pseudo">:hover</span> <span class="selector-id">#control-ring</span> &gt; <span class="selector-tag">li</span><span class="selector-class">.mask</span><span class="selector-class">.button</span>&#123;</span><br><span class="line">  <span class="attribute">margin-top</span>: -<span class="number">32px</span>;</span><br><span class="line">  <span class="attribute">margin-left</span>: -<span class="number">55px</span>;</span><br><span class="line">  <span class="attribute">background-image</span>: <span class="built_in">url</span>(<span class="string">'assets/images/nomask.png'</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#button</span><span class="selector-pseudo">:hover</span> <span class="selector-id">#control-ring</span> &gt; <span class="selector-tag">li</span><span class="selector-class">.history</span><span class="selector-class">.button</span>&#123;</span><br><span class="line">  <span class="attribute">margin-top</span>: <span class="number">5px</span>;</span><br><span class="line">  <span class="attribute">margin-left</span>: -<span class="number">70px</span>;</span><br><span class="line">  <span class="attribute">background-image</span>: <span class="built_in">url</span>(<span class="string">'assets/images/history.png'</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#button</span><span class="selector-pseudo">:hover</span> <span class="selector-id">#control-ring</span> &gt; <span class="selector-tag">li</span><span class="selector-class">.message</span><span class="selector-class">.button</span>&#123;</span><br><span class="line">  <span class="attribute">margin-top</span>: <span class="number">44px</span>;</span><br><span class="line">  <span class="attribute">margin-left</span>: -<span class="number">55px</span>;</span><br><span class="line">  <span class="attribute">background-image</span>: <span class="built_in">url</span>(<span class="string">'assets/images/message.png'</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#button</span><span class="selector-pseudo">:hover</span> <span class="selector-id">#control-ring</span> &gt; <span class="selector-tag">li</span><span class="selector-class">.setting</span><span class="selector-class">.button</span>&#123;</span><br><span class="line">  <span class="attribute">margin-top</span>: <span class="number">68px</span>;</span><br><span class="line">  <span class="attribute">margin-left</span>: -<span class="number">15px</span>;</span><br><span class="line">  <span class="attribute">background-image</span>: <span class="built_in">url</span>(<span class="string">'assets/images/setting.png'</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#button</span><span class="selector-pseudo">:hover</span> <span class="selector-id">#control-ring</span> &gt; <span class="selector-tag">li</span><span class="selector-class">.sign</span><span class="selector-class">.button</span>&#123;</span><br><span class="line">  <span class="attribute">margin-top</span>: <span class="number">60px</span>;</span><br><span class="line">  <span class="attribute">margin-left</span>: <span class="number">30px</span>;</span><br><span class="line">  <span class="attribute">background-image</span>: <span class="built_in">url</span>(<span class="string">'assets/images/signin.png'</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#button</span> <span class="selector-class">.apb</span>&#123;</span><br><span class="line">	<span class="attribute">background</span>: <span class="built_in">url</span>(<span class="string">'assets/images/atplus_white.png'</span>) center no-repeat;</span><br><span class="line">	<span class="attribute">background-size</span>: <span class="number">20px</span> <span class="number">15px</span>;</span><br><span class="line">	<span class="attribute">position</span>: absolute;</span><br><span class="line">	<span class="attribute">width</span>: <span class="number">26px</span>;</span><br><span class="line">	<span class="attribute">height</span>: <span class="number">26px</span>;</span><br><span class="line">	<span class="attribute">bottom</span>: <span class="number">97px</span>;</span><br><span class="line">	<span class="attribute">left</span>: <span class="number">77px</span>;</span><br><span class="line">	<span class="attribute">border-radius</span>: <span class="number">50%</span>;</span><br><span class="line">	<span class="attribute">background-color</span>: <span class="number">#989FCF</span>;</span><br><span class="line">	<span class="attribute">transition</span>: <span class="number">0.5s</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#button</span><span class="selector-pseudo">:hover</span> <span class="selector-class">.apb</span> &#123;</span><br><span class="line">	<span class="attribute">background</span>: <span class="built_in">url</span>(<span class="string">'assets/images/atplus_green.png'</span>) center no-repeat;</span><br><span class="line">  <span class="attribute">background-size</span>: <span class="number">40px</span> <span class="number">30px</span>;</span><br><span class="line"> 	<span class="attribute">width</span>: <span class="number">50px</span>;</span><br><span class="line"> 	<span class="attribute">height</span>: <span class="number">50px</span>;</span><br><span class="line">  <span class="attribute">bottom</span>: <span class="number">85px</span>;</span><br><span class="line">  <span class="attribute">left</span>: <span class="number">65px</span>;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">50%</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#303F9F</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="Snipaste_2019-10-03_22-43-27.png" alt="1"></p>
<p><img src="Snipaste_2019-10-03_22-43-51.png" alt="1"></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/09/29/leetcodeweek8/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="zzm99">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="zzm99">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/09/29/leetcodeweek8/" itemprop="url">Weekly Contest 156</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-09-29T17:15:17+08:00">
                2019-09-29
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/leetcode/" itemprop="url" rel="index">
                    <span itemprop="name">leetcode</span>
                  </a>
                </span>

                
                
                  , 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/leetcode/Weekly-Contest/" itemprop="url" rel="index">
                    <span itemprop="name">Weekly-Contest</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2019/09/29/leetcodeweek8/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count valine-comment-count" data-xid="/2019/09/29/leetcodeweek8/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Words count in article&#58;</span>
                
                <span title="Words count in article">
                  1.4k
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Reading time &asymp;</span>
                
                <span title="Reading time">
                  7
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="Unique-Number-of-Occurrences"><a href="#Unique-Number-of-Occurrences" class="headerlink" title="Unique Number of Occurrences"></a>Unique Number of Occurrences</h1><p>Given an array of integers arr, write a function that returns true if and only if the number of occurrences of each value in the array is unique.</p>
<p>Constraints:</p>
<ul>
<li>1 &lt;= arr.length &lt;= 1000</li>
<li>-1000 &lt;= arr[i] &lt;= 1000</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">bool</span> <span class="title">uniqueOccurrences</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; arr)</span> </span>&#123;</span><br><span class="line">        <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; countarr(<span class="number">2005</span>, <span class="number">0</span>);</span><br><span class="line">        <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; countnum(<span class="number">1000</span>,<span class="number">0</span>);</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;arr.size(); i++)</span><br><span class="line">        &#123;</span><br><span class="line">            countarr[arr[i]+<span class="number">1000</span>]++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;=<span class="number">2000</span>; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span>(countarr[i] != <span class="number">0</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">if</span>(countnum[countarr[i]] != <span class="number">0</span>)</span><br><span class="line">                    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">                <span class="keyword">else</span></span><br><span class="line">                    countnum[countarr[i]]++;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h1 id="Get-Equal-Substrings-Within-Budget"><a href="#Get-Equal-Substrings-Within-Budget" class="headerlink" title="Get Equal Substrings Within Budget"></a>Get Equal Substrings Within Budget</h1><p>给你两个长度相同的字符串，s 和 t。</p>
<p>将 s 中的第 i 个字符变到 t 中的第 i 个字符需要 |s[i] - t[i]| 的开销（开销可能为 0），也就是两个字符的 ASCII 码值的差的绝对值。</p>
<p>用于变更字符串的最大预算是 maxCost。在转化字符串时，总开销应当小于等于该预算，这也意味着字符串的转化可能是不完全的。</p>
<p>如果你可以将 s 的子字符串转化为它在 t 中对应的子字符串，则返回可以转化的最大长度。</p>
<p>如果 s 中没有子字符串可以转化成 t 中对应的子字符串，则返回 0。</p>
<p>Instead of two string, we can imagine an array of the same size with absolute differences. Then, the problem is to find the longest subarray with the sum not exceeding maxCost.</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">equalSubstring</span><span class="params">(<span class="built_in">string</span> s, <span class="built_in">string</span> t, <span class="keyword">int</span> maxCost)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> i=<span class="number">0</span>; </span><br><span class="line">        <span class="keyword">int</span> j=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span>(i &lt; s.size())</span><br><span class="line">        &#123;</span><br><span class="line">            maxCost -= <span class="built_in">abs</span>(s[i]-t[i++]);</span><br><span class="line">            <span class="keyword">if</span>(maxCost &lt; <span class="number">0</span>) maxCost += <span class="built_in">abs</span>(s[j] - t[j++]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> i-j;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">equalSubstring</span><span class="params">(<span class="built_in">string</span> s, <span class="built_in">string</span> t, <span class="keyword">int</span> maxCost)</span> </span>&#123;</span><br><span class="line">        <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; ab(s.size(), <span class="number">0</span>);</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;s.size(); i++)</span><br><span class="line">        &#123;</span><br><span class="line">            ab[i] = <span class="built_in">abs</span>(s[i]-t[i]);</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">int</span> ii = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> jj = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span>(jj &lt; s.size())</span><br><span class="line">        &#123;</span><br><span class="line">            maxCost -= ab[jj++];</span><br><span class="line">            <span class="keyword">if</span>(maxCost &lt; <span class="number">0</span>) maxCost += ab[ii++];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> jj-ii;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h1 id="Remove-All-Adjacent-Duplicates-in-String-II"><a href="#Remove-All-Adjacent-Duplicates-in-String-II" class="headerlink" title="Remove All Adjacent Duplicates in String II"></a>Remove All Adjacent Duplicates in String II</h1><p>Given a string s, a k duplicate removal consists of choosing k adjacent and equal letters from s and removing them causing the left and the right side of the deleted substring to concatenate together.</p>
<p>We repeatedly make k duplicate removals on s until we no longer can.</p>
<p>Return the final string after all such duplicate removals have been made.</p>
<p>It is guaranteed that the answer is unique.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Input: s = &quot;deeedbbcccbdaa&quot;, k = 3</span><br><span class="line">Output: &quot;aa&quot;</span><br><span class="line">Explanation: </span><br><span class="line">First delete &quot;eee&quot; and &quot;ccc&quot;, get &quot;ddbbbdaa&quot;</span><br><span class="line">Then delete &quot;bbb&quot;, get &quot;dddaa&quot;</span><br><span class="line">Finally delete &quot;ddd&quot;, get &quot;aa&quot;</span><br></pre></td></tr></table></figure>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="built_in">string</span> <span class="title">removeDuplicates</span><span class="params">(<span class="built_in">string</span> s, <span class="keyword">int</span> k)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(s.size() == <span class="number">0</span>)</span><br><span class="line">            <span class="keyword">return</span> <span class="string">""</span>;</span><br><span class="line">        <span class="built_in">vector</span>&lt;<span class="keyword">char</span>&gt;  <span class="built_in">stack</span>(<span class="number">100005</span>, <span class="number">0</span>);</span><br><span class="line">        <span class="keyword">int</span> curidx = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;s.size(); i++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">char</span> tmpch = s[i];</span><br><span class="line">            <span class="keyword">int</span> tmpnum = <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j=curidx<span class="number">-1</span>; j&gt;=<span class="number">0</span>; j--)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">if</span>(<span class="built_in">stack</span>[j] == tmpch)</span><br><span class="line">                    tmpnum++;</span><br><span class="line">                <span class="keyword">else</span></span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(tmpnum &gt;= k)</span><br><span class="line">            &#123;</span><br><span class="line">                curidx -= k<span class="number">-1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">            &#123;</span><br><span class="line">                <span class="built_in">stack</span>[curidx] = tmpch;</span><br><span class="line">                curidx++;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">string</span> ret = <span class="string">""</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;curidx; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            ret += <span class="built_in">stack</span>[i];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ret;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h1 id="Minimum-Moves-to-Reach-Target-with-Rotations"><a href="#Minimum-Moves-to-Reach-Target-with-Rotations" class="headerlink" title="Minimum Moves to Reach Target with Rotations"></a>Minimum Moves to Reach Target with Rotations</h1><p>我们在一个 n*n 的网格上构建了新的迷宫地图，蛇的长度为 2，也就是说它会占去两个单元格。蛇会从左上角（(0, 0) 和 (0, 1)）开始移动。我们用 0 表示空单元格，用 1 表示障碍物。蛇需要移动到迷宫的右下角（(n-1, n-2) 和 (n-1, n-1)）。</p>
<p>每次移动，蛇可以这样走：</p>
<ul>
<li>如果没有障碍，则向右移动一个单元格。并仍然保持身体的水平／竖直状态。</li>
<li>如果没有障碍，则向下移动一个单元格。并仍然保持身体的水平／竖直状态。</li>
<li>如果它处于水平状态并且其下面的两个单元都是空的，就顺时针旋转 90 度。蛇从（(r, c)、(r, c+1)）移动到 （(r, c)、(r+1, c)）。</li>
<li>如果它处于竖直状态并且其右面的两个单元都是空的，就逆时针旋转 90 度。蛇从（(r, c)、(r+1, c)）移动到（(r, c)、(r, c+1)）。</li>
</ul>
<p>返回蛇抵达目的地所需的最少移动次数。</p>
<p>如果无法到达目的地，请返回 -1。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">输入：grid = [[0,0,0,0,0,1],</span><br><span class="line">               [1,1,0,0,1,0],</span><br><span class="line">               [0,0,0,0,1,1],</span><br><span class="line">               [0,0,1,0,1,0],</span><br><span class="line">               [0,1,1,0,0,0],</span><br><span class="line">               [0,1,1,0,0,0]]</span><br><span class="line">输出：11</span><br><span class="line">解释：</span><br><span class="line">一种可能的解决方案是 [右, 右, 顺时针旋转, 右, 下, 下, 下, 下, 逆时针旋转, 右, 下]。</span><br></pre></td></tr></table></figure>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">bool</span> <span class="title">canRotate</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&gt;&amp; g, <span class="keyword">int</span> i, <span class="keyword">int</span> j)</span> </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> i &lt; g.size() - <span class="number">1</span> &amp;&amp; j &lt; g[i].size() - <span class="number">1</span> &amp;&amp; (g[i + <span class="number">1</span>][j] &amp; <span class="number">1</span>) == <span class="number">0</span> &amp;&amp; (g[i][j + <span class="number">1</span>] &amp; <span class="number">1</span>) == <span class="number">0</span> &amp;&amp; (g[i + <span class="number">1</span>][j + <span class="number">1</span>] &amp; <span class="number">1</span>) == <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">bool</span> <span class="title">canGoDown</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&gt;&amp; g, <span class="keyword">int</span> i, <span class="keyword">int</span> j, <span class="keyword">bool</span> vertical)</span> </span>&#123;</span><br><span class="line">      <span class="keyword">if</span> (vertical) <span class="keyword">return</span> i &lt; g.size() - <span class="number">2</span> &amp;&amp; (g[i + <span class="number">2</span>][j] &amp; <span class="number">1</span>) == <span class="number">0</span>;</span><br><span class="line">      <span class="keyword">return</span> i &lt; g.size() - <span class="number">1</span> &amp;&amp; (g[i + <span class="number">1</span>][j] &amp; <span class="number">1</span>) == <span class="number">0</span> &amp;&amp; (g[i + <span class="number">1</span>][j + <span class="number">1</span>] &amp; <span class="number">1</span>) == <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">bool</span> <span class="title">canGoRight</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&gt;&amp; g, <span class="keyword">int</span> i, <span class="keyword">int</span> j, <span class="keyword">bool</span> vertical)</span> </span>&#123;</span><br><span class="line">      <span class="keyword">if</span> (!vertical) <span class="keyword">return</span> j &lt; g[i].size() - <span class="number">2</span> &amp;&amp; (g[i][j + <span class="number">2</span>] &amp; <span class="number">1</span>) == <span class="number">0</span>;</span><br><span class="line">      <span class="keyword">return</span> j &lt; g[i].size() - <span class="number">1</span> &amp;&amp; (g[i][j + <span class="number">1</span>] &amp; <span class="number">1</span>) == <span class="number">0</span> &amp;&amp; (g[i + <span class="number">1</span>][j + <span class="number">1</span>] &amp; <span class="number">1</span>) == <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">minimumMoves</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&gt;&amp; grid, <span class="keyword">int</span> steps = <span class="number">0</span>)</span> </span>&#123;</span><br><span class="line">      <span class="built_in">queue</span>&lt;<span class="built_in">array</span>&lt;<span class="keyword">int</span>, 3&gt;&gt; q1, q2;</span><br><span class="line">      q1.push(&#123; <span class="number">0</span>, <span class="number">0</span>, <span class="literal">false</span> &#125;); <span class="comment">// not vertical.</span></span><br><span class="line">      <span class="keyword">while</span> (!q1.empty()) &#123;</span><br><span class="line">        <span class="keyword">while</span> (!q1.empty()) &#123;</span><br><span class="line">          <span class="keyword">auto</span>&amp; a = q1.front();</span><br><span class="line">          <span class="keyword">if</span> (a[<span class="number">0</span>] == grid.size() - <span class="number">1</span> &amp;&amp; a[<span class="number">1</span>] == grid[a[<span class="number">0</span>]].size() - <span class="number">2</span>) <span class="keyword">return</span> steps;</span><br><span class="line">          <span class="keyword">if</span> ((grid[a[<span class="number">0</span>]][a[<span class="number">1</span>]] &amp; (a[<span class="number">2</span>] ? <span class="number">2</span> : <span class="number">4</span>)) == <span class="number">0</span>) &#123;</span><br><span class="line">            grid[a[<span class="number">0</span>]][a[<span class="number">1</span>]] = grid[a[<span class="number">0</span>]][a[<span class="number">1</span>]] | (a[<span class="number">2</span>] ? <span class="number">2</span> : <span class="number">4</span>);</span><br><span class="line">            <span class="keyword">if</span> (canGoDown(grid, a[<span class="number">0</span>], a[<span class="number">1</span>], a[<span class="number">2</span>])) q2.push(&#123; a[<span class="number">0</span>] + <span class="number">1</span>, a[<span class="number">1</span>], a[<span class="number">2</span>] &#125;);</span><br><span class="line">            <span class="keyword">if</span> (canGoRight(grid, a[<span class="number">0</span>], a[<span class="number">1</span>], a[<span class="number">2</span>])) q2.push(&#123; a[<span class="number">0</span>], a[<span class="number">1</span>] + <span class="number">1</span>, a[<span class="number">2</span>] &#125;);</span><br><span class="line">            <span class="keyword">if</span> (canRotate(grid, a[<span class="number">0</span>], a[<span class="number">1</span>])) q2.push(&#123; a[<span class="number">0</span>], a[<span class="number">1</span>], a[<span class="number">2</span>] ? <span class="literal">false</span> : <span class="literal">true</span> &#125;);</span><br><span class="line">          &#125;</span><br><span class="line">          q1.pop();</span><br><span class="line">        &#125;</span><br><span class="line">        ++steps;</span><br><span class="line">        swap(q1, q2);</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/09/29/shixun7/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="zzm99">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="zzm99">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/09/29/shixun7/" itemprop="url">Google Test</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-09-29T15:50:19+08:00">
                2019-09-29
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/初级实训/" itemprop="url" rel="index">
                    <span itemprop="name">初级实训</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2019/09/29/shixun7/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count valine-comment-count" data-xid="/2019/09/29/shixun7/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Words count in article&#58;</span>
                
                <span title="Words count in article">
                  3k
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Reading time &asymp;</span>
                
                <span title="Reading time">
                  12
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="单元测试"><a href="#单元测试" class="headerlink" title="单元测试"></a>单元测试</h1><blockquote>
<p>针对程序模块（软件设计的最小单位）来进行正确性检验的测试工作</p>
</blockquote>
<p>程序模块可以是函数式编程中的函数和过程，也可以是面向对象编程中类的方法。通常每当我们完成了一个模块，我们都会对它进行测试以确保模块功能的完好。比如，后台完成了一个插入数据库的api，那么当我们使用这个api进行数据插入时，我们希望数据能够被正确的插入进数据库，于是我们使用这个api先尝试着插入几条数据，然后再在数据库中查看是否正确插入，这便是单元测试的工作原理。</p>
<p>单元测试一个非常重要的特点是，各个模块是独立的，A模块功能的正确不应该依赖于B模块（因为我们只对A模块进行单元测试）。比如插入数据库的api模块不应该与制造数据的模块同时在同一单元测试中测试，出现依赖关系的时候应该考虑是否应该重新划分模块，将A，B模块集成为一个模块，如将产生数据和插入数据库集成为一个模块（对于这种情况不建议合并），或者通过模拟(mock)来模拟B的功能（在数据库插入的api测试中mock接口，并产生假数据）。</p>
<h1 id="xUnit"><a href="#xUnit" class="headerlink" title="xUnit"></a>xUnit</h1><p>xUnit是一系列单元测试框架的集合(x代表语言，如JUnit中J代表Java)，xUnit测试框架是面向对象的，并且他们有一套共同的架构</p>
<h1 id="xUnit的架构"><a href="#xUnit的架构" class="headerlink" title="xUnit的架构"></a>xUnit的架构</h1><ul>
<li><p>Test runner<br>执行所有测试的可执行程序</p>
</li>
<li><p>Test case<br>基本类，所有的测试都继承于test case，对于同一个单元可以有多个test case来进行测试，每个测试可以覆盖不同的方面。比如在测试插入数据库api时，一个case对应插入正确数据，另一个case对应插入错误数据等</p>
</li>
<li><p>Test fixtures<br>可以理解为测试所需环境。在每个测试前为测试而搭建的环境（preconditions）。例如在在测试插入数据库api时，fixture可以为连接数据库</p>
</li>
<li><p>Test suites<br>共享同一fixture（precondition）的一系列测试，test suit里面的测试顺序不重要（每个测试都是独立的，互不依赖），例如在上述测试中的两个test case就应该放入同一test suit下</p>
</li>
<li><p>Test execution<br>对于每一个test case，都以以下步骤执行</p>
</li>
<li><ul>
<li>setup() // 搭建测试环境</li>
</ul>
</li>
<li><ul>
<li>test() // 执行测试</li>
</ul>
</li>
<li><ul>
<li>teardown() // 恢复测试环境，以免影响到下一个测试</li>
</ul>
</li>
<li><p>Test result formatter<br>输出测试结果，可以是plain text也可以是xml或其他格式</p>
</li>
<li><p>Assertions<br>Assertion（断言）是用来测试函数返回结果是否为期望值的函数或宏，遇到非期望值时，一般会抛出异常，终止当前测试</p>
</li>
</ul>
<h1 id="Google-Test"><a href="#Google-Test" class="headerlink" title="Google Test"></a>Google Test</h1><blockquote>
<p>Google Test，全称为Google’s C++ test framework，是一个基于xUnit的C++测试框架</p>
</blockquote>
<h1 id="Google-Test程序框架"><a href="#Google-Test程序框架" class="headerlink" title="Google Test程序框架"></a>Google Test程序框架</h1><p><img src="Snipaste_2019-10-03_22-51-50.png" alt="1"></p>
<h1 id="Quick-Look"><a href="#Quick-Look" class="headerlink" title="Quick Look"></a>Quick Look</h1><p>假设我们实现了一个除法函数，其定义和实现如下：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">ifndef</span> DIVISION_H</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> DIVISION_H</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdexcept&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> myns &#123;</span><br><span class="line">    <span class="function"><span class="keyword">float</span> <span class="title">divide</span><span class="params">(<span class="keyword">float</span> dividend, <span class="keyword">float</span> divisor)</span> <span class="title">throw</span><span class="params">(<span class="built_in">std</span>::domain_error)</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span> <span class="comment">/* DIVISION_H */</span></span></span><br></pre></td></tr></table></figure>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// division.cpp</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdexcept&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"division.h"</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">float</span> myns::divide(<span class="keyword">float</span> dividend, <span class="keyword">float</span> divisor) <span class="keyword">throw</span>(domain_error) &#123;</span><br><span class="line">    <span class="keyword">if</span> (divisor == <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">throw</span> domain_error(<span class="string">"Divisor cannot be 0"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> dividend / divisor;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>测试文件:<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// test.cpp</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;gtest/gtest.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdexcept&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"division.h"</span></span></span><br><span class="line"></span><br><span class="line">TEST(divisionTest, divisorNotZero) &#123;</span><br><span class="line">    EXPECT_EQ(<span class="number">2</span>, myns::divide(<span class="number">8</span>, <span class="number">4</span>));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">TEST(divisionTest, divisorZero) &#123;</span><br><span class="line">    EXPECT_THROW(myns::divide(<span class="number">1</span>, <span class="number">0</span>), <span class="built_in">std</span>::domain_error);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>编译命令：</p>
<p><code>g++ division.cpp test.cpp -o test -std=c++11 -lgtest -lgtest_main -lpthread</code></p>
<p>执行结果：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">Running main() from gtest_main.cc</span><br><span class="line">[==========] Running 2 tests from 1 test case.</span><br><span class="line">[----------] Global test environment set-up.</span><br><span class="line">[----------] 2 tests from divisionTest</span><br><span class="line">[ RUN ] divisionTest.divisorNotZero</span><br><span class="line">[ OK ] divisionTest.divisorNotZero (0 ms)</span><br><span class="line">[ RUN ] divisionTest.divisorZero</span><br><span class="line">[ OK ] divisionTest.divisorZero (0 ms)</span><br><span class="line">[----------] 2 tests from divisionTest (0 ms total)</span><br><span class="line">[----------] Global test environment tear-down</span><br><span class="line">[==========] 2 tests from 1 test case ran. (0 ms total)</span><br><span class="line">[ PASSED ] 2 tests.</span><br></pre></td></tr></table></figure>
<h1 id="声明："><a href="#声明：" class="headerlink" title="声明："></a>声明：</h1><ul>
<li>TEST()</li>
</ul>
<p>在Google Test中，每一个Test case都由 TEST() 宏来实现，其接收两个参数，第一个为test casename，第二个为test name（测试名字都是自己定义的，但是要按照要求定义）。正如QuickLook中的两个测试， TEST(divisionTest, divisorNotZero) ， TEST(divisionTest,divisorZero) ，第一个参数表明是对divide这个函数进行测试，第二个表示测试的测试的方面。这些名字会反应在生成的报告上。</p>
<p>传入的名字不能带 _ 字符，因为这是一个宏定义，用户传入的名字会插入在Google Test内部定义的变量中，而这个变量是用 _ 连接的。</p>
<ul>
<li>Assertions</li>
</ul>
<p>Google Test的断言非常丰富，在Quick Look中使用了两个断言： EXPECT_EQ() 和EXPECT_THROW() 。其中 EXPECT_EQ() 会判断传入的两个值是否相等，若相等，则这次断言通过，不等，则失败。通常，第一个参数为期望值，第二个为实际测试的值，这个结果会最终反映在report中，用Expected和Actual表示。 EXPECT_THROW() 同理，第一个参数为一个表达式，第二个为一个异常，并期望这个表达式会抛出这个异常。</p>
<p>Google Test中断言分为两类，一类是 EXPECT_<em> ，一类是 ASSERT_</em> 。 EXPECT_<em> 在失败时会继续这个 TEST() ，而 ASSERT_</em> 在失败时会终止该 TEST() 。<strong>一般情况下， ASSERT_* 用于致命错误，或者是这次断言失败 TEST() 中剩下的测试都没有意义的情况</strong>。</p>
<ul>
<li>编译命令</li>
</ul>
<p>写好的测试代码在编译时需要加上 -std=c++11 -lpthread -lgtest -lgtest_main 参数，Google Test安装时会安装 libgtest.a 和 libgtest_main.a （默认的main函数，这样就不用写main函数了）静态库。同时，Google Test是一个多线程程序，需要使用线程库。（实际测试的时候Google Test并不会开多线程让测试同时进行，因为这涉及到线程安全和死亡测试等问题，同时，也不要在非pthread库支持的平台下多线程测试 ）</p>
<h1 id="重要的特性"><a href="#重要的特性" class="headerlink" title="重要的特性"></a>重要的特性</h1><h2 id="main"><a href="#main" class="headerlink" title="main()"></a>main()</h2><p>上面的例子使用了Goolge Test自带的main静态库，当然我们也可以自己写main函数，下面是Google Test自带的main函数：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span> **argv)</span> </span>&#123;</span><br><span class="line">    ::testing::InitGoogleTest(&amp;argc, argv);</span><br><span class="line">    <span class="keyword">return</span> RUN_ALL_TESTS();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Google Test首先接收外部传参进行初始化（具体参数可以在运行测试程序时传入 –help 参数查看）， RUN_ALL_TESTS() 会收集所有的 TEST 并执行，因此实现的 TEST 不用手动注册了（后面讲到全局 SetUp 和 TearDown 时需要手动注册）</p>
<h2 id="Fixture"><a href="#Fixture" class="headerlink" title="Fixture"></a>Fixture</h2><p>Fixture的目的是减少代码冗余，如果你的一系列测试中都需要在相同的环境运行，或者需要相同的测试数据，那么你不用在每次 TEST 的开头手动搭建环境和创建数据，而可以将这些配置都写在fixture里面。</p>
<p>在Google Test中，创建一个fixture首先需要定义一个类，类名即为test case的名字，并从 ::testing::Test 继承，其中的所有成员都需要声明为 public 或 protected ，其中你可以定义以下内容：</p>
<ul>
<li>virtual void SetUp() （注意是大写的U）</li>
<li>virtual void TearDown()</li>
<li>static void SetUpTestCase()</li>
<li>static void TearDownTestCase()</li>
<li>以及在测试中需要用到的变量</li>
</ul>
<p>回顾xUnit中Test execution的执行顺序，每次执行 TEST() 的都会先执行 SetUp() ，每次 TEST() 执行完后都会执行 TearDown() ,继承 ::testing::Test 后重写这两个函数可以自定义其功能，对于开头数据库的例子，连接数据库的步骤就可以写在 SetUp() 中。</p>
<p>SetUpTestCase() 和 TearDownTestCase() 同理，不过这个函数是作用在Test Case上的。它们分别会在Test Case中第一个 TEST() 的 SetUp() 之前和最后一个 TEST() 的 TearDown() 之后执行，作为整个Test Case的环境维护。这两个函数可以用于构造开销较大，在每个 TEST() 中都要用到的数据，以达到数据在 TEST() 之间共享的目的。要注意的是，数据共享并不意味着两个 TEST() 之间能够相互影响，原则上 TEST() 之间是应该互相独立的，其执行顺序不同也不应该影响测试结果，这意味着，当你在一个 TEST() 中修改了数据，你应该在测试结束时将其恢复。</p>
<p>在每一个 TEST() 中都需要用到的变量可以直接声明在fixture中，在测试中可以直接使用 SetUpTestCase() 和 TearDownTestCase() 中操作的变量需要声明为 static 。所以，执行顺序为： SetUpTestCase()-&gt;SetUp()-&gt;TEST()-&gt;TearDown()-&gt;…-&gt;SetUp()-&gt;TEST()-&gt;TearDown()-&gt;TearDownTestCase() ，若有多个Test Case，则继续下一个Case。</p>
<p>最后，要使用这个fixture，你需要使用 TEST_F() 宏，并将fixture类的名字传入第一个参数。</p>
<p>现在修改上面 test.cpp 的代码，添加了 setup 和 teardown ，并添加了一些数据</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// test.cpp</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;gtest/gtest.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdexcept&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"division.h"</span></span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">divisionTest</span>:</span> <span class="keyword">public</span> ::testing::Test &#123;</span><br><span class="line"><span class="keyword">protected</span>:</span><br><span class="line">    <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">SetUpTestCase</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"SetUpTestCase\n"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">TearDownTestCase</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"TearDownTestCase\n"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">SetUp</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        data1 = <span class="number">8</span>;</span><br><span class="line">        data2 = <span class="number">4</span>;</span><br><span class="line">        data3 = <span class="number">0</span>;</span><br><span class="line">        <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"SetUp\n"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">TearDown</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"TearDown\n"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">int</span> data1, data2, data3;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">TEST_F(divisionTest, divisorNotZero) &#123;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"Test: divisorNotZero\n"</span>;</span><br><span class="line">    EXPECT_EQ(<span class="number">2</span>, myns::divide(data1, data2));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">TEST_F(divisionTest, divisorZero) &#123;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"Test: divisorZero\n"</span>;</span><br><span class="line">    EXPECT_THROW(myns::divide(<span class="number">1</span>, data3), <span class="built_in">std</span>::domain_error);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>运行结果：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">Running main() from gtest_main.cc</span><br><span class="line">[==========] Running <span class="number">2</span> tests from <span class="number">1</span> test <span class="keyword">case</span>.</span><br><span class="line">[----------] Global test environment <span class="built_in">set</span>-up.</span><br><span class="line">[----------] <span class="number">2</span> tests from divisionTest</span><br><span class="line">SetUpTestCase</span><br><span class="line">[ RUN ] divisionTest.divisorNotZero</span><br><span class="line">SetUp</span><br><span class="line">Test: divisorNotZero</span><br><span class="line">TearDown</span><br><span class="line">[ OK ] divisionTest.divisorNotZero (<span class="number">0</span> ms)</span><br><span class="line">[ RUN ] divisionTest.divisorZero</span><br><span class="line">SetUp</span><br><span class="line">Test: divisorZero</span><br><span class="line">TearDown</span><br><span class="line">[ OK ] divisionTest.divisorZero (<span class="number">0</span> ms)</span><br><span class="line">TearDownTestCase</span><br><span class="line">[----------] <span class="number">2</span> tests from divisionTest (<span class="number">0</span> ms total)</span><br><span class="line">[----------] Global test environment tear-down</span><br><span class="line">[==========] <span class="number">2</span> tests from <span class="number">1</span> test <span class="keyword">case</span> ran. (<span class="number">0</span> ms total)</span><br><span class="line">[ PASSED ] <span class="number">2</span> tests.</span><br></pre></td></tr></table></figure>
<p>从上面的运行结果可以很直观的看出执行顺序。</p>
<p>既然Test Case也有 setup 和 teardown ，那么对于整个程序是否也有类似的方法呢？有的，在AdvancedGuide中有介绍。和创建fixture类似，首先你需要继承 ::testing::Environment 这个类，并重写 virtual void SetUp() 和 virtual void TearDown() 这两个方法。但是与fixture不同的是，你需要注册这个environment，在 RUN_ALL_TESTS() 之前调用 Environment*AddGlobalTestEnvironment(Environment* env) 来注册。当然，你可以注册多个Environment，他们会按照注册顺序依次执行。若你的设置了重复次数，那么每次重复时都会执行。</p>
<p>重写main函数：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// main.cpp</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;gtest/gtest.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"division.h"</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">myEnv_1</span>:</span> <span class="keyword">public</span> ::testing::Environment &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">SetUp</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; <span class="string">"Global setup 1\n"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">TearDown</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; <span class="string">"Global teardown 1\n"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">myEnv_2</span>:</span> <span class="keyword">public</span> ::testing::Environment &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">SetUp</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; <span class="string">"Global setup 2\n"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">TearDown</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; <span class="string">"Global teardown 2\n"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span> **argv)</span> </span>&#123;</span><br><span class="line">    AddGlobalTestEnvironment(<span class="keyword">new</span> myEnv_1);</span><br><span class="line">    AddGlobalTestEnvironment(<span class="keyword">new</span> myEnv_2);</span><br><span class="line">    ::testing::InitGoogleTest(&amp;argc, argv);</span><br><span class="line">    <span class="keyword">return</span> RUN_ALL_TESTS();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>运行结果：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">[==========] Running 2 tests from 1 test case.</span><br><span class="line">[----------] Global test environment set-up.</span><br><span class="line">Global setup 1</span><br><span class="line">Global setup 2</span><br><span class="line">[----------] 2 tests from divisionTest</span><br><span class="line">SetUpTestCase</span><br><span class="line">[ RUN ] divisionTest.divisorNotZero</span><br><span class="line">SetUp</span><br><span class="line">Test: divisorNotZero</span><br><span class="line">TearDown</span><br><span class="line">[ OK ] divisionTest.divisorNotZero (0 ms)</span><br><span class="line">[ RUN ] divisionTest.divisorZero</span><br><span class="line">SetUp</span><br><span class="line">Test: divisorZero</span><br><span class="line">TearDown</span><br><span class="line">[ OK ] divisionTest.divisorZero (0 ms)</span><br><span class="line">TearDownTestCase</span><br><span class="line">[----------] 2 tests from divisionTest (0 ms total)</span><br><span class="line">[----------] Global test environment tear-down</span><br><span class="line">Global teardown 2</span><br><span class="line">Global teardown 1</span><br><span class="line">[==========] 2 tests from 1 test case ran. (0 ms total)</span><br><span class="line">[ PASSED ] 2 tests.</span><br></pre></td></tr></table></figure>
<h1 id="自定义报错信息"><a href="#自定义报错信息" class="headerlink" title="自定义报错信息"></a>自定义报错信息</h1><p>如果在上面fixture例子中没有实现抛出异常的代码，那么错误报告会是这样：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">test.cpp:37: Failure</span><br><span class="line">Expected: myns::divide(1, data3) throws an exception of type std::domain_error.</span><br><span class="line">    Actual: it throws nothing.</span><br></pre></td></tr></table></figure>
<p>你会发现报错信息中出现了 data3 这个变量但是并没有显示出它的值，这非常不友好，也不容易让我们定位到错误。Google Test的所有断言都可以接收字符串流并显示在报告中。对此，你可以自定义报错信息来查看 data3 变量。下面是一个例子：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">TEST_F(divisionTest, divisorZero) &#123;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"Test: divisorZero\n"</span>;</span><br><span class="line">    ASSERT_THROW(myns::divide(<span class="number">1</span>, data3), <span class="built_in">std</span>::domain_error)</span><br><span class="line">        &lt;&lt; <span class="string">"With data3 = "</span> &lt;&lt; data3;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>报错信息：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Expected: myns::divide(1, data3) throws an exception of type std::domain_error.</span><br><span class="line">    Actual: it throws nothing.</span><br><span class="line">With data3 = 0</span><br></pre></td></tr></table></figure>
<hr>
<blockquote>
<p>Assertion的详细介绍（包括自定义断言等）<br>测试程序的传参（可以设置测试行为，如：生成xml报告，设置测试次数，随机测试顺序等）</p>
</blockquote>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/09/29/shixun6/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="zzm99">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="zzm99">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/09/29/shixun6/" itemprop="url">linux gdb</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-09-29T15:50:15+08:00">
                2019-09-29
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/初级实训/" itemprop="url" rel="index">
                    <span itemprop="name">初级实训</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2019/09/29/shixun6/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count valine-comment-count" data-xid="/2019/09/29/shixun6/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Words count in article&#58;</span>
                
                <span title="Words count in article">
                  934
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Reading time &asymp;</span>
                
                <span title="Reading time">
                  3
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="安装gdb"><a href="#安装gdb" class="headerlink" title="安装gdb"></a>安装gdb</h1><p><code>sudo apt-get install gdb</code></p>
<h1 id="编译test"><a href="#编译test" class="headerlink" title="编译test"></a>编译test</h1><ol>
<li>在编译指令里记得加上 -g 参数，这个会使得编译出来的程序可以使用gdb进行调试<br><code>$ g++ -g test.cpp -o test</code></li>
<li>gdb载入可执行文件，这里有两个方法</li>
</ol>
<p>直接运行 gdb test</p>
<p>或：</p>
<p>gdb + file test</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">$ gdb</span><br><span class="line">GNU gdb (Ubuntu 7.11.1-0ubuntu1~16.04) 7.11.1</span><br><span class="line">Copyright (C) 2016 Free Software Foundation, Inc.</span><br><span class="line">License GPLv3+: GNU GPL version 3 or later &lt;http://gnu.org/licenses/gpl.h</span><br><span class="line">tml&gt;</span><br><span class="line">This is free software: you are free to change and redistribute it.</span><br><span class="line">There is NO WARRANTY, to the extent permitted by law. Type <span class="string">"show copyin</span></span><br><span class="line"><span class="string">g"</span></span><br><span class="line">and <span class="string">"show warranty"</span> <span class="keyword">for</span> details.</span><br><span class="line">This GDB was configured as <span class="string">"x86_64-linux-gnu"</span>.</span><br><span class="line">Type <span class="string">"show configuration"</span> <span class="keyword">for</span> configuration details.</span><br><span class="line">For bug reporting instructions, please see:</span><br><span class="line">&lt;http://www.gnu.org/software/gdb/bugs/&gt;.</span><br><span class="line">Find the GDB manual and other documentation resources online at:</span><br><span class="line">&lt;http://www.gnu.org/software/gdb/documentation/&gt;.</span><br><span class="line">For <span class="built_in">help</span>, <span class="built_in">type</span> <span class="string">"help"</span>.</span><br><span class="line">Type <span class="string">"apropos word"</span> to search <span class="keyword">for</span> commands related to <span class="string">"word"</span>.</span><br><span class="line">(gdb) gdb tes</span><br><span class="line">Undefined <span class="built_in">command</span>: <span class="string">"gdb"</span>. Try <span class="string">"help"</span>.</span><br><span class="line">(gdb) gdb file <span class="built_in">test</span></span><br><span class="line">Undefined <span class="built_in">command</span>: <span class="string">"gdb"</span>. Try <span class="string">"help"</span>.</span><br><span class="line">(gdb) file <span class="built_in">test</span></span><br><span class="line">Reading symbols from test...done.</span><br><span class="line">(gdb)</span><br></pre></td></tr></table></figure>
<h1 id="基本命令："><a href="#基本命令：" class="headerlink" title="基本命令："></a>基本命令：</h1><ul>
<li>l : 输出代码，输出当前上下各10行的代码</li>
<li>b 行数 : 在那一行上设置断点</li>
<li>r : 运行整个程序，直至遇到断点</li>
<li>s : 单步继续执行（进入函数）</li>
<li>n : 单步继续进行 (不进入函数，直接把子函数一并运行完)</li>
<li>q : 退出gdb</li>
<li>d num ： num为断点编号， 删除该断点</li>
<li>c : continue , 继续运行直至下一个断点</li>
<li>p exp ： 查看变量exp的内容</li>
<li>k ：kill掉当前运行的程序（然后再用r来重新调试）</li>
</ul>
<h1 id="breakpoint进阶"><a href="#breakpoint进阶" class="headerlink" title="breakpoint进阶"></a>breakpoint进阶</h1><ul>
<li>b 行数 if i &gt; 9 :增加条件， 当 i &gt; 9的时候，程序运行到num行会停下来。</li>
<li>info break ： 查看断点信息，包括所有断点号，禁用情况等</li>
<li>删除breakpoint：</li>
<li><ul>
<li>clear 行数 ：删除该行上的所以断点</li>
</ul>
</li>
<li><ul>
<li>d ：删除所有的断点</li>
</ul>
</li>
<li><ul>
<li>d 1-6 ：删除编号是1～6的断点</li>
</ul>
</li>
<li>禁用断点相关：</li>
<li><ul>
<li>disable num :禁用某个断点</li>
</ul>
</li>
<li><ul>
<li>disable :全部禁用</li>
</ul>
</li>
<li><ul>
<li>enable num :启用某个断点</li>
</ul>
</li>
<li><ul>
<li>enable ：全部启用</li>
</ul>
</li>
<li>在其他文件里面设置断点</li>
<li><ul>
<li>b 文件名 ： 函数名/行数 ：for example:<br><code>(gdb) b AgendaService.cpp : AgendaService::startAgenda()</code></li>
</ul>
</li>
</ul>
<h1 id="设置观察点-（数据断点）："><a href="#设置观察点-（数据断点）：" class="headerlink" title="设置观察点 （数据断点）："></a>设置观察点 （数据断点）：</h1><p>watch 变量/表达式</p>
<ul>
<li>当观察点的内容有变化的时候，即立刻停止</li>
<li>用delete来删除观察点</li>
<li>info watchpoints 来查看所有观察点的信息</li>
</ul>
<h1 id="p-命令"><a href="#p-命令" class="headerlink" title="p 命令"></a>p 命令</h1><ul>
<li><p>p 后的变量必须是全局变量或者是当前可见的局部变量，如果两者同名，则优先查看局部变<br>量</p>
</li>
<li><p>p 还可以显示其他数据结构，比如说，在调试agenda的时候，可以直接 p startdate ，这<br>样就可以直接看startdate这个Date类里面的全部内容了</p>
</li>
</ul>
<h1 id="ptype命令"><a href="#ptype命令" class="headerlink" title="ptype命令"></a>ptype命令</h1><p>通过 ptype var 可以查看var的数据类型</p>
<h1 id="bt命令"><a href="#bt命令" class="headerlink" title="bt命令"></a>bt命令</h1><p>bt 查看程序crash堆栈信息</p>
<p>当程序被停住了，你需要做的第一件事就是查看程序是在哪里住的。当你的程序调用了一个函数，函数的地址，函数参数，数内的局部变量都会被压入“栈”（Stack）中。你可以用GDB令来查看当前的栈中的信息。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">(gdb) bt</span><br><span class="line">#0 func (n=250) at tst.c:6</span><br><span class="line">#1 0x08048524 in</span><br><span class="line">main (argc=1, argv=0xbffff674) at tst.c:30</span><br><span class="line">#2 0x40040Arrayed in __libc_start_main () from /lib/libc.so.6</span><br></pre></td></tr></table></figure>
<ol>
<li>程序崩溃的时候，这个时候查看最近的堆栈消息，可以非常快地查看到是在哪里出错的。</li>
<li>当你确认了一个函数有bug，这个函数被其他很多函数调用，这个时候，程序在这个函数停<br>下来的时候使用bt命令，就可以知道是哪个函数调用了有问题的函数。</li>
</ol>
<h1 id="display命令"><a href="#display命令" class="headerlink" title="display命令"></a>display命令</h1><p>display + var 来使用自动显示var的值</p>
<h1 id="set命令"><a href="#set命令" class="headerlink" title="set命令"></a>set命令</h1><p>set tol=100 这样可以在程序运行时把tol设置为100</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/09/29/shixun5/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="zzm99">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="zzm99">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/09/29/shixun5/" itemprop="url">Makefile</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-09-29T15:50:10+08:00">
                2019-09-29
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/初级实训/" itemprop="url" rel="index">
                    <span itemprop="name">初级实训</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2019/09/29/shixun5/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count valine-comment-count" data-xid="/2019/09/29/shixun5/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Words count in article&#58;</span>
                
                <span title="Words count in article">
                  1.5k
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Reading time &asymp;</span>
                
                <span title="Reading time">
                  6
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="Makefile简介"><a href="#Makefile简介" class="headerlink" title="Makefile简介"></a>Makefile简介</h1><p>Makefile是一个定义项目的编译规则的文件，以便于整个项目的编译。</p>
<p>Makefile中就可以定义好各个文件的依赖关系，在之后再需要编译时，只需要执行 make命令就可以自动编译了。</p>
<p>在一次 make之后，一般 会生成很多 目标文件(*.o) 和一个可执行文件，当这些文件和源代码都没有被修改时，再次执行 make会提示 make: ‘bin/your_program’ is up to date.，而当你只修改了一个源代码文件再执行 make时，它也不会重复编译已经最新的文件，而只编译依赖了你的源代码的文件，这对提高编译效率是非常重要的。</p>
<h1 id="基本语法"><a href="#基本语法" class="headerlink" title="基本语法"></a>基本语法</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">target ... : prerequisites ...</span><br><span class="line"><span class="built_in">command</span></span><br><span class="line">...</span><br><span class="line">...</span><br></pre></td></tr></table></figure>
<ul>
<li><p>target 是下面的命令的 目标 ，即下面命令是为了target而生的。这个 目标 可以是*.o文件，也可以是可执行文件</p>
</li>
<li><p>prerequisites 则是生成该目标所 依赖 的文件，如果没有依赖的文件，下面的命令就不会执行且会中断 make</p>
</li>
<li><p>command 就是生成目标文件的命令，一般就是编译命令了，如 g++ main.cpp等等(注<br>意：命令前面必须有 Tab (‘\t’) 真正 的 Tab，这样make才会认为它是指令)</p>
</li>
</ul>
<p><img src="Snipaste_2019-09-29_16-33-42.png" alt="1"></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">main: main.o support1.o</span><br><span class="line">	g++ main.o support1.o -o main</span><br><span class="line"></span><br><span class="line">main.o: main.cpp main.hpp support1.hpp</span><br><span class="line">	g++ main.cpp main.hpp support1.hpp -c</span><br><span class="line"></span><br><span class="line">support1.o: support1.cpp support1.hpp</span><br><span class="line">	g++ support1.cpp support1.hpp -c</span><br><span class="line"></span><br><span class="line">clean:</span><br><span class="line">	@rm -f main</span><br><span class="line">	@rm -f *.o</span><br><span class="line">	@rm -f *.gch</span><br></pre></td></tr></table></figure>
<p><img src="Snipaste_2019-09-29_16-35-08.png" alt="1"></p>
<hr>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Makefile version 3</span></span><br><span class="line">CC := g++</span><br><span class="line">FLAGS := ­std=c++11 -­w</span><br><span class="line"></span><br><span class="line">main: support1.o main.o</span><br><span class="line">    $(CC) $(FLAGS) main.o support1.o ­-o <span class="variable">$@</span></span><br><span class="line"></span><br><span class="line">support1.o: support1.hpp support1.cpp</span><br><span class="line">    $(CC) $(FLAGS) ­-c support1.cpp</span><br><span class="line"></span><br><span class="line">main.o: main.cpp</span><br><span class="line">    $(CC) $(FLAGS) -­c main.cpp</span><br><span class="line"></span><br><span class="line">clean:</span><br><span class="line">    @rm ­f *.o</span><br><span class="line">    @rm ­f *.gch</span><br><span class="line">    @rm ­f main</span><br></pre></td></tr></table></figure>
<ul>
<li>变量</li>
<li>在Makefile中可以使用”<name> := <content>”声明变量，并在此后使用$(<name>)可以使用，类似C/C++中的宏，它是字符串的直接替换。如 $(CC) $(FLAGS) ­csupport1.cpp会变成 g++ ­std=c++11 ­-w -­c support1.cpp。</name></content></name></li>
<li>前缀是 $符号，后面带个括号 ()的都是变量，如 $@也是变量，称为 自动化变量，它是目标文件的名字。如目标为 main的这一段的命令会变成 g++ ­std=c++ -­w main.o support1.o ­-o main</li>
<li>伪目标</li>
<li>clean一段中，target后面没有依赖文件，这称为 伪目标 ，作用是写了之后就可以使用 make clean来执行它的命令集了</li>
<li>这里的命令集可以使用许多shell命令，但似乎并不是所有都能用</li>
<li>命令前面的 @表示 不显示这条命令 ，和Windows下的.bat类似(下面分别是不使<br>用 @和使用 @的对比)</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">在Makefile中加入</span><br><span class="line">foo:</span><br><span class="line"><span class="built_in">echo</span> <span class="string">"Testing"</span></span><br><span class="line"><span class="comment"># 同样地，这是伪目标，可以使用make foo来执行其命令集</span></span><br><span class="line"></span><br><span class="line">user@computer:~/learnmake$ make foo</span><br><span class="line"><span class="built_in">echo</span> <span class="string">"Testing"</span></span><br><span class="line">Testing</span><br><span class="line"></span><br><span class="line">Makefile中改为</span><br><span class="line">foo:</span><br><span class="line">@<span class="built_in">echo</span> <span class="string">"Testing"</span></span><br><span class="line"></span><br><span class="line">user@computer:~/learnmake$ make foo</span><br><span class="line">Testing</span><br></pre></td></tr></table></figure>
<h2 id="复杂一点的情况"><a href="#复杂一点的情况" class="headerlink" title="复杂一点的情况"></a>复杂一点的情况</h2><p>有时候一个项目的目录并没有如此简单，例如：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">.</span><br><span class="line">├── bin</span><br><span class="line">├── build</span><br><span class="line">├── include</span><br><span class="line">├── lib</span><br><span class="line">│ ├── mysql</span><br><span class="line">│ └── mysql++</span><br><span class="line">└── src</span><br></pre></td></tr></table></figure>
<ul>
<li>bin是编译生成的可执行文件</li>
<li>build是编译的中间文件如*.o文件</li>
<li>include是各种.h或.hpp文件</li>
<li>lib是一些必要的库文件</li>
<li>src是.cpp文件</li>
</ul>
<p>这个时候，事情并不简单。因为现在的代码“身首异处”，所以要把它们的路径告诉编译器才行，我们使用 相对路径 来达到效果。</p>
<p>.表示当前目录， ..表示上一级目录，用类似这样的相对路径来找到需要的文件，当然 ./经常可以省略</p>
<p>以下面的目录结构为目标(假设原本不存在 bin目录和 build目录)：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">.</span><br><span class="line">├── bin</span><br><span class="line">│ └── main</span><br><span class="line">├── build</span><br><span class="line">│ ├── main.o</span><br><span class="line">│ └── support1.o</span><br><span class="line">├── include</span><br><span class="line">│ └── support1.hpp</span><br><span class="line">├── Makefile</span><br><span class="line">└── src</span><br><span class="line">├── main.cpp</span><br><span class="line">└── support1.cpp</span><br></pre></td></tr></table></figure>
<p>因为最后的目标 main在 bin目录中，所以target也应该是 bin/main，而其依赖的两个文件也要写清楚目录了 build/main.o build/support1.o。</p>
<p>而在编译前，应该确认 bin和 build都是存在的目录，因此需要在编译前多一条命令 <code>mkdir ­-p bin</code>。因为要指明文件目录，于是编译命令变成 <code>g++ ­std=c++11 -­w build/main.o build/support1.o ­-o bin/main</code></p>
<p>由于在support1.cpp中我们写了 #include “support1.hpp”，按以前的经验，这样写是只能找到同一个文件夹下的文件的，所以需要加一个编译器的参数 ­I./include，让它去其他地方找头文件。这样编译命令就完成了，生成.o文件的也类似。那么Makefile就可以写出来了</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">CC := g++</span><br><span class="line">FLAGS := ­std=c++11 -­w</span><br><span class="line"></span><br><span class="line">bin/main: build/support1.o build/main.o</span><br><span class="line">    @mkdir ­-p bin</span><br><span class="line">    $(CC) $(FLAGS) ­I./include build/support1.o build/main.o ­-o <span class="variable">$@</span></span><br><span class="line"></span><br><span class="line">build/%.o: src/%.cpp</span><br><span class="line">    @mkdir ­-p build</span><br><span class="line">    $(CC) $(FLAGS) ­I./include ­-c ­-o <span class="variable">$@</span> src/support1.cpp</span><br><span class="line"></span><br><span class="line">build/main.o: src/main.cpp</span><br><span class="line">    @mkdir ­-p build</span><br><span class="line">    $(CC) $(FLAGS) ­I./include ­-c ­-o <span class="variable">$@</span> src/main.cpp</span><br><span class="line"></span><br><span class="line">clean:</span><br><span class="line">    @rm ­rf build</span><br><span class="line">    @rm ­rf bin</span><br></pre></td></tr></table></figure>
<p>这样就好了吗？不，不可以。将来要是文件结构有了偏差，写这个Makefile的人是要负责的。如果目录不同了，那么改各个路径要每个都改，而最好的做法应该是只改一处就影响全局。所以应该下面这样会更好。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">CC := g++</span><br><span class="line">FLAGS := ­std=c++11 ­-w</span><br><span class="line">INC_DIR := include</span><br><span class="line">SRC_DIR := src</span><br><span class="line">BUILD_DIR := build</span><br><span class="line">BIN_DIR := bin</span><br><span class="line">INCLUDE := ­I./$(INC_DIR)</span><br><span class="line"></span><br><span class="line">$(BIN_DIR)/main: $(BUILD_DIR)/support1.o $(BUILD_DIR)/main.o</span><br><span class="line">    @mkdir ­-p $(BIN_DIR)</span><br><span class="line">    $(CC) $(FLAGS) $(INCLUDE) $(BUILD_DIR)/support1.o $(BUILD_DIR)/main.o ­-o <span class="variable">$@</span></span><br><span class="line"></span><br><span class="line">$(BUILD_DIR)/%.o: $(SRC_DIR)/%.cpp</span><br><span class="line">    @mkdir -­p $(BUILD_DIR)</span><br><span class="line">    $(CC) $(FLAGS) $(INCLUDE) ­-c -­o <span class="variable">$@</span> $(SRC_DIR)/support1.cpp</span><br><span class="line"></span><br><span class="line">$(BUILD_DIR)/main.o: $(SRC_DIR)/main.cpp</span><br><span class="line">    @mkdir -­p $(BUILD_DIR)</span><br><span class="line">    $(CC) $(FLAGS) $(INCLUDE) -­c -­o <span class="variable">$@</span> $(SRC_DIR)/main.cpp</span><br><span class="line"></span><br><span class="line">clean:</span><br><span class="line">    @rm ­rf $(BUILD_DIR)</span><br><span class="line">    @rm ­rf $(BIN_DIR)</span><br></pre></td></tr></table></figure>
<p>然而这个Makefile还可以更加简短并更加完善</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">CC := g++</span><br><span class="line">FLAGS := ­std=c++11 ­-w</span><br><span class="line">INC_DIR := include</span><br><span class="line">SRC_DIR := src</span><br><span class="line">BUILD_DIR := build</span><br><span class="line">BIN_DIR := bin</span><br><span class="line">INCLUDE := ­I./$(INC_DIR)</span><br><span class="line"></span><br><span class="line">$(BIN_DIR)/main: $(BUILD_DIR)/support1.o $(BUILD_DIR)/main.o</span><br><span class="line">    @mkdir ­-p $(BIN_DIR)</span><br><span class="line">    $(CC) $(FLAGS) $(INCLUDE) $^ ­-o <span class="variable">$@</span></span><br><span class="line"></span><br><span class="line">$(BUILD_DIR)/%.o: $(SRC_DIR)/%.cpp</span><br><span class="line">    @mkdir -­p $(BUILD_DIR)</span><br><span class="line">    $(CC) $(FLAGS) $(INCLUDE) -­c ­-o <span class="variable">$@</span> $&lt;</span><br><span class="line"></span><br><span class="line">clean:</span><br><span class="line">    @rm ­rf $(BUILD_DIR)</span><br><span class="line">    @rm ­rf $(BIN_DIR)</span><br></pre></td></tr></table></figure>
<ul>
<li>两个自动化变量</li>
<li><ul>
<li>$^依赖文件的集合，用空格分隔</li>
</ul>
</li>
<li><ul>
<li>$&lt;第一个依赖文件</li>
</ul>
</li>
<li><ul>
<li>其实在 %.o部分，也可以换成 $^</li>
</ul>
</li>
<li><ul>
<li>还有上文已经提过的 $@目标文件</li>
</ul>
</li>
<li>通配符 %</li>
<li><ul>
<li>作用是就是 *的作用了通配</li>
</ul>
</li>
</ul>
<p>这里的好处就是当 src目录下再多cpp文件时，生成%.o文件的这一部分不用更改，生成可执行文件那里只要加一个依赖就好了</p>
<p>实际上还有方法让生成可执行文件的规则也自动</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/09/29/shixun4/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="zzm99">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="zzm99">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/09/29/shixun4/" itemprop="url">c++ 11特性</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-09-29T15:45:08+08:00">
                2019-09-29
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/初级实训/" itemprop="url" rel="index">
                    <span itemprop="name">初级实训</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2019/09/29/shixun4/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count valine-comment-count" data-xid="/2019/09/29/shixun4/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Words count in article&#58;</span>
                
                <span title="Words count in article">
                  1.6k
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Reading time &asymp;</span>
                
                <span title="Reading time">
                  7
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="c-11特性："><a href="#c-11特性：" class="headerlink" title="c++ 11特性："></a>c++ 11特性：</h1><h2 id="Type-Inference-类型推导"><a href="#Type-Inference-类型推导" class="headerlink" title="Type Inference 类型推导"></a>Type Inference 类型推导</h2><ol>
<li>auto</li>
<li>decltype：</li>
</ol>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> a;</span><br><span class="line"><span class="built_in">std</span>::<span class="built_in">string</span> b;</span><br><span class="line"><span class="keyword">decltype</span>(a) i;</span><br><span class="line"><span class="keyword">decltype</span>(b) s;</span><br></pre></td></tr></table></figure>
<p>这个语法可以应用于复用匿名的struct或union</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> &#123;</span> <span class="comment">// 匿名</span></span><br><span class="line"> <span class="keyword">int</span> x, y;</span><br><span class="line">&#125; temp_position;</span><br><span class="line"></span><br><span class="line"><span class="keyword">union</span> &#123; <span class="comment">// 匿名</span></span><br><span class="line"> <span class="keyword">int</span> *foo;</span><br><span class="line">&#125; temp_union;</span><br><span class="line"></span><br><span class="line"><span class="keyword">decltype</span>(temp_position) pos;</span><br><span class="line"><span class="keyword">decltype</span>(temp_union) uni;</span><br></pre></td></tr></table></figure>
<p>需要注意，auto和decltype都是编译时推导变量的类型，而不能在运行时推导变量类型，而且其推导有一定的限制。例如</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">auto</span> i; <span class="comment">// Compile error</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">foo</span><span class="params">(<span class="keyword">auto</span> a, <span class="keyword">auto</span> b)</span></span>; <span class="comment">// Compile error, but it is valid in C++14</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">bar</span><span class="params">(<span class="keyword">auto</span> a = <span class="number">1</span>, <span class="keyword">auto</span> b = <span class="number">1</span>)</span></span>; <span class="comment">// 虽然我们可能觉得编译器可以推导</span></span><br><span class="line"> <span class="comment">// 但这也是不合法的表达</span></span><br></pre></td></tr></table></figure>
<h3 id="Return-Value-Tracking-追踪返回类型"><a href="#Return-Value-Tracking-追踪返回类型" class="headerlink" title="Return Value Tracking(追踪返回类型)"></a>Return Value Tracking(追踪返回类型)</h3><p>追踪返回类型的函数和普通函数的声明最大区别在于返回类型的后置。如</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">func</span><span class="params">(<span class="keyword">char</span>* a, <span class="keyword">int</span> b)</span></span>;</span><br><span class="line">auto func(char* a, int b) -&gt; int;</span><br></pre></td></tr></table></figure>
<p>而追踪返回类型还可以让我们在写返回类型时，不写明作用域</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Foo</span> &#123;</span></span><br><span class="line"> <span class="class"><span class="keyword">struct</span> <span class="title">InnerType</span> &#123;</span> <span class="keyword">int</span> i; &#125;</span><br><span class="line"> <span class="function">InnerType <span class="title">GetInner</span><span class="params">()</span></span>;</span><br><span class="line"> InnerType it;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">auto</span> OuterType::GetInner() -&gt; InnerType &#123; <span class="keyword">return</span> it; &#125;</span><br></pre></td></tr></table></figure>
<p>上面体现的效果并不是特别的明显，那么下面的例子呢？</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 有的时候，你会发现这是面试题</span></span><br><span class="line"><span class="comment">// ——《Understanding C++11 Analysis</span></span><br><span class="line"><span class="comment">// and Application of New Features》</span></span><br><span class="line"><span class="keyword">int</span> (*(*pf()) ()) () &#123; <span class="keyword">return</span> <span class="literal">nullptr</span>; &#125;</span><br><span class="line">auto pf1() -&gt; auto (*) () -&gt; int (*) () &#123; return nullptr; &#125;</span><br></pre></td></tr></table></figure>
<p>上述两个函数的作用是完全一样的，但是可读性却完全不同<br>这其实是一个返回函数指针的函数，而这个指针指向着返回int*的函数</p>
<p>auto的使用细则:auto*, auto&amp;, const auto, volatile auto…</p>
<h2 id="Rvalue-Reference-右值引用"><a href="#Rvalue-Reference-右值引用" class="headerlink" title="Rvalue Reference 右值引用"></a>Rvalue Reference 右值引用</h2><p>通常，在C++中，我们称可以使用取地址运算符(&amp;)的值为左值，而不是左值的值就是右值</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">   s <span class="keyword">int</span> a = <span class="number">1</span>, b = <span class="number">3</span>, c = <span class="number">0</span>;</span><br><span class="line">    c = a + b;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; &amp;c &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>; <span class="comment">// Valid, c is an Lvalue</span></span><br><span class="line">    <span class="comment">// std::cout &lt;&lt; &amp;(a + b) &lt;&lt; std::endl; // Invalid, (a + b) is an Rvalue</span></span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; &amp;a &lt;&lt; <span class="string">" "</span> &lt;&lt; &amp;b &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>; <span class="comment">// Valid, a and b are Lvalue</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>右值引用，就是使右值也拥有一个名字，如果它是一个临时变量（如函数的返回值），右值引用还能给它“续命”。</p>
<p>基本语法 value_type &amp;&amp; val = temp_val;</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">foo</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> &amp;&amp; a = foo(); <span class="comment">// foo()的返回值不会立即销毁</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>所谓移动语义，就是从将要销毁的临时变量那里把资源移动过来。这样就节省了分配空间和复制值的开销。这就是移动语义的核心。</p>
<h2 id="Lambda-匿名函数"><a href="#Lambda-匿名函数" class="headerlink" title="Lambda 匿名函数"></a>Lambda 匿名函数</h2><p>Lambda Functional Programming</p>
<p>基本语法：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[capture] (parameters) mutable -&gt; return_type &#123; statement &#125;</span><br><span class="line">[capture]: 捕捉列表。能够捕捉上下文的变量供lambda函数使用。</span><br><span class="line">(parameters): 参数列表。</span><br><span class="line">mutable: 默认情况下，lambda函数总是一个const函数，mutable可以取</span><br><span class="line">消其常量性。</span><br><span class="line">-&gt;return_type: 返回类型。</span><br><span class="line">statement: 函数体。可以使用捕获的变量</span><br></pre></td></tr></table></figure>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// example</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span> <span class="params">( )</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> a = <span class="number">2</span> ;</span><br><span class="line">    <span class="comment">// catch a</span></span><br><span class="line">    <span class="keyword">auto</span> <span class="built_in">pow</span> = [ a ] ( <span class="keyword">int</span> times ) - &gt; <span class="keyword">int</span> &#123;</span><br><span class="line">        <span class="keyword">int</span> ret = <span class="number">1</span> ;</span><br><span class="line">        <span class="keyword">while</span> ( times -- ) ret * = a ; <span class="comment">// use a</span></span><br><span class="line">        <span class="keyword">return</span> ret ;</span><br><span class="line">    &#125; ;</span><br><span class="line">    <span class="built_in">std</span> :: <span class="built_in">cout</span> &lt;&lt; <span class="built_in">pow</span> ( <span class="number">3</span> ) &lt;&lt; <span class="built_in">std</span> :: <span class="built_in">endl</span> ; <span class="comment">// 8</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span> ;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">std</span>::<span class="built_in">list</span>&lt;<span class="keyword">int</span>&gt; li = &#123; <span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span> &#125;;</span><br><span class="line"><span class="keyword">auto</span> printList = [](<span class="built_in">std</span>::<span class="built_in">list</span>&lt;<span class="keyword">int</span>&gt;&amp; li) &#123;</span><br><span class="line">   <span class="keyword">for</span>(<span class="keyword">auto</span> it = li.begin(); it != li.end(); it++) &#123;</span><br><span class="line">       <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; *it &lt;&lt; <span class="string">" "</span>;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">&#125;;</span><br><span class="line">printList(li);</span><br><span class="line"><span class="comment">// remove all even numbers from the list</span></span><br><span class="line">li.remove_if([&amp;](<span class="keyword">int</span> x) -&gt; <span class="keyword">bool</span> &#123;</span><br><span class="line">   <span class="keyword">if</span>(x % <span class="number">2</span> == <span class="number">0</span>) &#123;</span><br><span class="line">   <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;);</span><br><span class="line">printList(li);</span><br></pre></td></tr></table></figure>
 <figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"> <span class="built_in">std</span> :: <span class="built_in">array</span> &lt; <span class="keyword">int</span> , 10 &gt; s = &#123; <span class="number">5</span> , <span class="number">7</span> , <span class="number">4</span> , <span class="number">2</span> , <span class="number">8</span> , <span class="number">6</span> , <span class="number">1</span> , <span class="number">9</span> , <span class="number">0</span> , <span class="number">3</span> &#125; ;</span><br><span class="line"><span class="comment">// sort using a lambda expression</span></span><br><span class="line"><span class="built_in">std</span> :: sort ( s. begin ( ) , s. end ( ) , [ ] ( <span class="keyword">int</span> a, <span class="keyword">int</span> b ) &#123;</span><br><span class="line">    <span class="keyword">return</span> b &lt; a ;</span><br><span class="line">&#125; ) ;</span><br></pre></td></tr></table></figure>
<h2 id="Closure-函数闭包"><a href="#Closure-函数闭包" class="headerlink" title="Closure 函数闭包"></a>Closure 函数闭包</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">fromto = [ ] ( <span class="keyword">auto</span> start, <span class="keyword">auto</span> finish ) &#123;</span><br><span class="line">    <span class="keyword">return</span> [ = ] ( ) <span class="keyword">mutable</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> ( start &lt; finish )</span><br><span class="line">            <span class="keyword">return</span> start ++ ;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            <span class="keyword">throw</span> <span class="built_in">std</span> :: runtime_error ( <span class="string">"Complete"</span> ) ;</span><br><span class="line">    &#125; ;</span><br><span class="line"> &#125; ;</span><br><span class="line"> <span class="keyword">auto</span> range = fromto ( <span class="number">0</span> , <span class="number">10</span> ) ;</span><br><span class="line"></span><br><span class="line"> <span class="built_in">std</span> :: <span class="built_in">cout</span> &lt;&lt; range ( ) &lt;&lt; <span class="built_in">std</span> :: <span class="built_in">endl</span> ;</span><br><span class="line"> <span class="built_in">std</span> :: <span class="built_in">cout</span> &lt;&lt; range ( ) &lt;&lt; <span class="built_in">std</span> :: <span class="built_in">endl</span> ;</span><br><span class="line"> <span class="built_in">std</span> :: <span class="built_in">cout</span> &lt;&lt; range ( ) &lt;&lt; <span class="built_in">std</span> :: <span class="built_in">endl</span> ;</span><br><span class="line"> <span class="built_in">std</span> :: <span class="built_in">cout</span> &lt;&lt; range ( ) &lt;&lt; <span class="built_in">std</span> :: <span class="built_in">endl</span> ;</span><br></pre></td></tr></table></figure>
<h2 id="Initializer-List"><a href="#Initializer-List" class="headerlink" title="Initializer List"></a>Initializer List</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">s</span> &#123;</span></span><br><span class="line">    <span class="keyword">int</span> x;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">string</span> <span class="built_in">std</span>;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; vec;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function">s <span class="title">func</span> <span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;<span class="number">1</span>, <span class="string">"abcde"</span>, &#123;<span class="number">2</span>,<span class="number">4</span>,<span class="number">6</span>,<span class="number">8</span>,<span class="number">10</span>&#125;&#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">s s1&#123;<span class="number">1</span>, <span class="string">"abcde"</span>, &#123;<span class="number">2</span>,<span class="number">4</span>,<span class="number">6</span>,<span class="number">8</span>,<span class="number">10</span>&#125;&#125;;</span><br></pre></td></tr></table></figure>
<h2 id="Smart-Pointer-智能指针"><a href="#Smart-Pointer-智能指针" class="headerlink" title="Smart Pointer 智能指针"></a>Smart Pointer 智能指针</h2><h3 id="auto-ptr-C-98"><a href="#auto-ptr-C-98" class="headerlink" title="auto_ptr(C++98):"></a>auto_ptr(C++98):</h3><p>auto_ptr以对象的方式管理堆分配的内存，并在适当的时间(比如auto_ptr析构时)，释放获得的堆内存。这种管理方式只要程序员将new返回的指针作为auto_ptr的初始值即可，不需要显式调用delete。比如：</p>
<p>auto_ptr(new int);</p>
<p>不过auto_ptr有一些缺点，如拷贝时返回一个左值，不能调用delete[]等，在C++11中被废弃。</p>
<h3 id="unique-ptr"><a href="#unique-ptr" class="headerlink" title="unique_ptr"></a>unique_ptr</h3><p>unique_ptr如其命名，表示它管理一个只属于它的内存，它不能被复制，可以被移动。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="built_in">unique_ptr</span>&lt;<span class="keyword">int</span>&gt; up1(<span class="keyword">new</span> <span class="keyword">int</span>(<span class="number">11</span>));</span><br><span class="line"><span class="built_in">unique_ptr</span>&lt;<span class="keyword">int</span>&gt; up2 = up1; <span class="comment">// 编译错误，复制</span></span><br><span class="line"><span class="built_in">unique_ptr</span>&lt;<span class="keyword">int</span>&gt; up3 = move(up1) <span class="comment">// std::move会使up1清空，</span></span><br><span class="line"> <span class="comment">// 这句的语义是将up1移动给up3</span></span><br><span class="line"><span class="built_in">cout</span> &lt;&lt; *up1 &lt;&lt; <span class="built_in">endl</span>; <span class="comment">// 错误，up1已经不拥有该内存</span></span><br><span class="line"><span class="built_in">cout</span> &lt;&lt; *up3 &lt;&lt; <span class="built_in">endl</span>; <span class="comment">// 11</span></span><br><span class="line">up3.reset(); <span class="comment">// reset使指针置空并释放内存</span></span><br><span class="line">up1.reset(); <span class="comment">// 不会导致内存错误</span></span><br><span class="line"><span class="built_in">cout</span> &lt;&lt; *up3 &lt;&lt; <span class="built_in">endl</span>; <span class="comment">// 错误，内存已释放</span></span><br><span class="line"><span class="comment">// 即使不调用reset，unique_ptr对象在析构时也会释放拥有的内存</span></span><br></pre></td></tr></table></figure>
<h3 id="shared-ptr"><a href="#shared-ptr" class="headerlink" title="shared_ptr"></a>shared_ptr</h3><p>shared_ptr也如其命名，表示多个智能指针可以拥有同一个堆内存。在实现上使用了引用计数，当一个shared_ptr失效，内存也不会被释放，而是引用计数减小。当引用计数归零的时候，shared_ptr才会真正释放堆内存的空间。</p>
<h3 id="weak-ptr"><a href="#weak-ptr" class="headerlink" title="weak_ptr"></a>weak_ptr</h3><p>weak_ptr用于指向一个shared_ptr，但它实际上不拥有这个内存。其lock()方法可返回一个shared_ptr，而当所指对象已经失效时，可以返回nullptr。用这个可以验证shared_ptr的有效性。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="built_in">shared_ptr</span>&lt;<span class="keyword">int</span>&gt; sp1(<span class="keyword">new</span> <span class="keyword">int</span>(<span class="number">22</span>));</span><br><span class="line"><span class="built_in">shared_ptr</span>&lt;<span class="keyword">int</span>&gt; sp2 = sp1; <span class="comment">// 和sp1共享一个堆内存</span></span><br><span class="line">weak_ptr&lt;<span class="keyword">int</span>&gt; wp = sp1; <span class="comment">// 指向sp1所指对象</span></span><br><span class="line"><span class="built_in">cout</span> &lt;&lt; *sp1 &lt;&lt; <span class="built_in">endl</span>; <span class="comment">// 22</span></span><br><span class="line"><span class="built_in">cout</span> &lt;&lt; *sp2 &lt;&lt; <span class="built_in">endl</span>; <span class="comment">// 22</span></span><br><span class="line">sp1.reset(); <span class="comment">// 引用计数-1，但不释放内存</span></span><br><span class="line"><span class="keyword">if</span> (wp.lock() != <span class="literal">nullptr</span>) <span class="built_in">cout</span> &lt;&lt; <span class="string">"valid"</span> &lt;&lt; <span class="built_in">endl</span>; <span class="comment">//valid</span></span><br><span class="line"><span class="built_in">shared_ptr</span>&lt;<span class="keyword">int</span>&gt; sp3 = wp.lock(); <span class="comment">// sp3指向与sp1相同的对象</span></span><br><span class="line">sp2.reset();</span><br><span class="line">sp3.reset(); <span class="comment">// 所指对象被释放</span></span><br><span class="line"><span class="keyword">if</span> (wp.lock() == <span class="literal">nullptr</span>) <span class="built_in">cout</span> &lt;&lt; <span class="string">"invalid"</span> &lt;&lt; <span class="built_in">endl</span>; <span class="comment">// invalid</span></span><br></pre></td></tr></table></figure>
<h3 id="Range-Base-Loop"><a href="#Range-Base-Loop" class="headerlink" title="Range Base Loop"></a>Range Base Loop</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; a &#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>&#125;;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">auto</span> i : a) &#123;</span><br><span class="line">        <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; i &lt;&lt; <span class="string">" "</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/09/29/shixun3/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="zzm99">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="zzm99">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/09/29/shixun3/" itemprop="url">linux 指令入门</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-09-29T15:45:01+08:00">
                2019-09-29
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/初级实训/" itemprop="url" rel="index">
                    <span itemprop="name">初级实训</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2019/09/29/shixun3/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count valine-comment-count" data-xid="/2019/09/29/shixun3/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Words count in article&#58;</span>
                
                <span title="Words count in article">
                  1.9k
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Reading time &asymp;</span>
                
                <span title="Reading time">
                  7
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="linux-指令入门"><a href="#linux-指令入门" class="headerlink" title="linux 指令入门"></a>linux 指令入门</h1><h2 id="cd"><a href="#cd" class="headerlink" title="cd"></a>cd</h2><p>打开terminal，进入的是你的主目录路径，通过cd命令，可以进入其他目录。格式为 cd[dir] ，dir是目录的路径，可以是绝对路径也可以是相对路径，其中 ./ 代表当前文件夹， ../ 代表上一目录，也就是父文件夹。如果没有参数，回到主目录（也就是 ~/ ）。</p>
<h2 id="ls"><a href="#ls" class="headerlink" title="ls"></a>ls</h2><p>键入 ls [option] [dir] ，你会得到整个dir目录下的未隐藏文件（夹）</p>
<p>option是参数选项，如使用 ls -a ./ 显示当前目录所有文件， -a 显示所有文件， -l 以详细列表显示，-R 以递归的方式列出指定目录下的所有文件</p>
<h2 id="man"><a href="#man" class="headerlink" title="man"></a>man</h2><p>如果想知道一个命令更多的信息怎么办，一般又三种方法：</p>
<ol>
<li><p>首先是试一下命令有没有自带的help参数，一般是 –help 、 -h ；</p>
</li>
<li><p>其次就是 man ，使用命令 man [command] 来打开一个命令的文档（如果有），通过回<br>车或者方向上下就可以读到整个文档了，退出的话按 q ；</p>
</li>
</ol>
<p><img src="Snipaste_2019-09-27_22-26-19.png" alt="1"></p>
<h2 id="mkdir、touch和cat"><a href="#mkdir、touch和cat" class="headerlink" title="mkdir、touch和cat"></a>mkdir、touch和cat</h2><p>mkdir dir 用来生成一个文件夹，文件夹所在的路径应当存在。</p>
<p>touch 命令一般用来生成一个文件， touch path 会生成一个路径为path的空白文件。</p>
<p>cat 命令会以文本方式读取一个文件，然后把文件中的内容输出到标准输出中，使用cat可以快捷的查看一个文件的内容。</p>
<p><img src="Snipaste_2019-09-27_22-28-35.png" alt="1"></p>
<h2 id="sudo"><a href="#sudo" class="headerlink" title="sudo"></a>sudo</h2><p>Linux下有些命令或者执行某些动作是需要权限的，这个有点类似于Windows下的管理员权限。如果你得到一个Permission denied，那么试试 sudo 命令。</p>
<p>sudo [command] 会让你输入用户密码，然后以超级用户的权限执行command命令（superuser do）。</p>
<p>注意： 这里输入密码时，是不会有任何回显的，不要认为没有成功输入</p>
<h2 id="mv-cp-rm-rmdir-mv"><a href="#mv-cp-rm-rmdir-mv" class="headerlink" title="mv cp rm rmdir mv"></a>mv cp rm rmdir mv</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cp hello.cpp ../</span><br><span class="line">cd ../</span><br><span class="line">rm hello.cpp</span><br></pre></td></tr></table></figure>
<p><img src="Snipaste_2019-09-27_23-14-42.png" alt="1"></p>
<p>mv 移动文件与目录或重命名<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mv hello.cpp helloworld.cpp</span><br><span class="line">mv helloworld.cpp ../</span><br></pre></td></tr></table></figure></p>
<p><img src="Snipaste_2019-09-27_23-23-45.png" alt="1"></p>
<p>Linux rmdir命令删除空的目录。<br><code>rmdir [-p] dirName</code></p>
<blockquote>
<p>-p 是当子目录被删除后使它也成为空目录的话，则顺便一并删除。</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">将工作目录下，名为 AAA 的子目录删除 :</span><br><span class="line">rmdir AAA</span><br><span class="line">在工作目录下的 BBB 目录中，删除名为 Test 的子目录。若 Test 删除后，BBB 目录成为空目录，则 BBB 亦予删除。</span><br><span class="line">rmdir -p BBB/Test</span><br></pre></td></tr></table></figure>
<h2 id="执行可执行文件"><a href="#执行可执行文件" class="headerlink" title="执行可执行文件"></a>执行可执行文件</h2><p>当前目录下的可执行文件前面加上./</p>
<h2 id="gcc、g-、gdb"><a href="#gcc、g-、gdb" class="headerlink" title="gcc、g++、gdb"></a>gcc、g++、gdb</h2><h3 id="gcc"><a href="#gcc" class="headerlink" title="gcc:"></a>gcc:</h3><ol>
<li>-c 只做编译，不做链接</li>
<li>-o 生成目标，后面的路径会生成目标文件</li>
<li><code>-std=c[++]**|gnu**</code> 规定ISO标准，如-std=c99就是使用c99标准编译文件，默认的话C语言是c89，C++是c++98/03</li>
<li>-g 插入调试信息，请配合gdb食用</li>
<li>-W** 警告某种规则，常见是-Wall，打开所有警告，可用值可以使用可以百度或者查看官方文档</li>
<li>-Werror 把警告视为错误</li>
<li>-Wno-** 关闭某种警告，可用值与上面相同</li>
<li>-I 将路径添加到预处理默认路径</li>
<li>-L 将路径添加到链接库默认路径</li>
<li>-l 链接的时候链接库默认路径下的库文件，如-lgtest会链接/usr/lib或者/usr/local/lib下的libgtest.a文件或许libgtest.so文件（静态库或者动态库）</li>
<li>-pthread 多线程代码使用</li>
</ol>
<h3 id="gdb"><a href="#gdb" class="headerlink" title="gdb:"></a>gdb:</h3><p>如果你编译代码的时候有加-g参数，那么你就可以使用gdb调试你的代码了</p>
<p>使用<code>gdb &lt;program&gt;</code>可以对可执行文件进行调试。</p>
<p><a href="https://blog.csdn.net/lyjtynet/article/details/4057723" target="_blank" rel="noopener">linux c++ gdb教程</a></p>
<h2 id="grep、locate、find-查找"><a href="#grep、locate、find-查找" class="headerlink" title="grep、locate、find 查找"></a>grep、locate、find 查找</h2><ul>
<li><p>如果想查找文档中的某些信息，使用grep绝对是个好选择<code>grep -i regex file</code> 会将file中匹配了正则表达式的行输出，请注意这里是行为单位的</p>
</li>
<li><p>find可以在特定文件夹中搜索匹配规则的文件，规则比较复杂，常用的是 -name 参数，可以查找名字匹配正则表达式的文件（包括文件夹，毕竟Unix一切皆文件嘛，文件夹也不例外）</p>
</li>
<li><p>locate命令可能需要通过 <code>sudo apt install locate</code> 安装，通过 locate name 可以定位文件位置，也就是查找文件啦</p>
</li>
</ul>
<h2 id="chmod"><a href="#chmod" class="headerlink" title="chmod"></a>chmod</h2><p>Linux下的文件是有权限控制的，使用 <code>ls -l</code> 可以看到每行最前面有-rwxrwxr-x之类的，这是描述用于文件的属性与权限。第一个字符代表文件是否为目录，如果是则为d，否为-；接下来九个字符每三个为一组，分别代表用户，组，和其他人的权限，三个字符分别代表读写执行的权限，即r、w和x。一个二进制文件必须要有可执行权限才能运行。为了改变文件的属性，可以使用命令 <code>chmod [option] mode ... file ...</code> 来更改文件权限。mode是指文件的权限更改模式，主要有以下两种类型：</p>
<ol>
<li><p>一个三位的八进制数。这个八进制数从高位到低位分别代表用户、组和其他人的权限模式。每个位是1、2、4或者它们的和，1代表执行，2代表写，4代表读。如7 = 1 + 2 + 4，所以7代表有读写执行的权限，而5= 1 + 4，所以5代表有读和执行，但是没有写的权限。如果将这个三位八进制数写成二进制，每一位0正好对应前文说道的后九位的-，而每一位1对应字符。如数字0775写成二进制是111111 101，对应的就是rwx rwx r-x。正所谓一言不合777， <code>chmod 777 path</code> 将文件的所有权限给了所有人，是很不安全的行为。</p>
</li>
<li><p><code>[a|u|g|o][+|=|-][rwx]</code> 的格式。其中a代表全部，u代表用户，g代表用户组，o代表其他，+是加上权限，=是权限改为，-是除去权限。如 <code>chmod u+x a+r a.out</code> 是使得用户可执行，全部可读文件a.out</p>
</li>
</ol>
<h2 id="Linux管道与（真）grep"><a href="#Linux管道与（真）grep" class="headerlink" title="Linux管道与（真）grep"></a>Linux管道与（真）grep</h2><p>一个由标准输入输出链接起来的进程集合，所以每一个进程的输出（stdout）被直接作为下一个进程的输入（stdin）</p>
<p><img src="Snipaste_2019-09-29_14-11-31.png" alt="1"></p>
<p>使用管道操作符 | 将多个命令连接起来，将前一个命令的输出作为当前命令的输入，就像管子一样字符串在命令之间流动。</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">apt list | grep $&#123;package&#125;\ \\[installed\\] #快速查找软件包是否安装</span><br><span class="line">cat file | grep regx #查找文件中匹配正则表达式的行，快，但是缺点是只能匹配一行，其实可以使用sed</span><br><span class="line">ll -R dir | grep regx #确定目录下（包括所有子目录）是否含有匹配正则表达式的文件，个人觉得比find稍快，但是不能定位路径</span><br></pre></td></tr></table></figure>
<p>使用管道+grep，可以极大减少无用信息的输出，极大地提高你的工作效率<br>当然，还有 less 命令可以使得长长的输出逐页输出，翻页随心所欲。</p>
<h2 id="bash的初始化脚本"><a href="#bash的初始化脚本" class="headerlink" title="bash的初始化脚本"></a>bash的初始化脚本</h2><p>严格意义上说这是题外话，但是我觉得跟大家分享一下还是有必要的一般来说有两个文件是在bash启动的过程中比较重要的，一个是/etc/bash.bashrc，另一个是~/.bashrc，主要都是bash的配置命令。文件/etc/bash.bashrc会在系统启动时执行，而~/.bashrc会在用户打开bash的时候执行。如果你在linux或者Windows中装过JVM或者JDK，一定忘不了要设置环境变量，而在Linux下，一般是在写在/etc/bash.bashrc中，这样开机的时候就会把<br>JDK或者JVM的目录添加到$PATH中.</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/6/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/6/">6</a><span class="page-number current">7</span><a class="page-number" href="/page/8/">8</a><span class="space">&hellip;</span><a class="page-number" href="/page/36/">36</a><a class="extend next" rel="next" href="/page/8/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image" src="/images/avatar.jpg" alt="zzm99">
            
              <p class="site-author-name" itemprop="name">zzm99</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">354</span>
                  <span class="site-state-item-name">posts</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">40</span>
                  <span class="site-state-item-name">categories</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">3</span>
                  <span class="site-state-item-name">tags</span>
                </a>
              </div>
            

          </nav>

          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="https://github.com/zzm99" target="_blank" title="GitHub">
                      
                        <i class="fa fa-fw fa-github"></i>GitHub</a>
                  </span>
                
            </div>
          

          
          

          
          

          

        </div>
      </section>

      

      
        <div class="back-to-top">
          <i class="fa fa-arrow-up"></i>
          
            <span id="scrollpercent"><span>0</span>%</span>
          
        </div>
      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">zzm99</span>

  
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-area-chart"></i>
    </span>
    
      <span class="post-meta-item-text">Site words total count&#58;</span>
    
    <span title="Site words total count">399.7k</span>
  
</div>


  <div class="powered-by">Powered by <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a></div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Gemini</a> v5.1.4</div>




        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
  
    <span class="site-uv">
      <i class="fa fa-user"></i>
      <span class="busuanzi-value" id="busuanzi_value_site_uv"></span>
      
    </span>
  

  
    <span class="site-pv">
      <i class="fa fa-eye"></i>
      <span class="busuanzi-value" id="busuanzi_value_site_pv"></span>
      
    </span>
  
</div>








        
      </div>
    </footer>

    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  


  











  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  

  
  
    <script type="text/javascript" src="/lib/canvas-nest/canvas-nest.min.js"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  










  <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
  <script src="//unpkg.com/valine/dist/Valine.min.js"></script>
  
  <script type="text/javascript">
    var GUEST = ['nick','mail','link'];
    var guest = 'nick,mail,link';
    guest = guest.split(',').filter(item=>{
      return GUEST.indexOf(item)>-1;
    });
    new Valine({
        el: '#comments' ,
        verify: false,
        notify: false,
        appId: 'tCb3SA6mqeAq2F28wecWLXyU-gzGzoHsz',
        appKey: 'xqRqUNcwfzn1jIhCov5sNS9G',
        placeholder: 'Just go go',
        avatar:'mm',
        guest_info:guest,
        pageSize:'10' || 10,
    });
  </script>



  

  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  

  

  
  

  

  

  


  <!-- 页面点击小红心 
  <script type="text/javascript" src="/js/src/click.js"></script>
  -->

<!-- 爆炸 
  
   <canvas class="fireworks" style="position: fixed;left: 0;top: 0;z-index: 1; pointer-events: none;" ></canvas> 
   <script type="text/javascript" src="//cdn.bootcss.com/animejs/2.2.0/anime.min.js"></script> 
   <script type="text/javascript" src="/js/src/fireworks.js"></script>
  
-->

<script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"debug":false,"model":{"scale":0.8,"hHeadPos":0.5,"vHeadPos":0.5,"jsonPath":"/live2dw/assets/hibiki.model.json"},"display":{"superSample":2,"width":200,"height":450,"position":"left","hOffset":0,"vOffset":0},"mobile":{"show":true,"scale":0.5},"react":{"opacityDefault":0.9,"opacityOnHover":0.9},"log":false});</script></body>
</html>
